# Interview Questions

## Cloud
1. [what-is-azure-function](https://github.com/emranxec/KeepLearning/blob/main/README.md#q--what-is-azure-function)
2. [what-is-azure-kubernetes](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-azure-kubernate)
3. [what-is-serverless-computing](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-serverless-computing)
4. [what-is-saas](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-saas)
5. [how-to-configure-ci/cd-process](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-to-configure-cicd-process)


## UI
1. [what-is-responsive-ui-in-js](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-responsive-ui-in-js)
2. [why-jquery-over-javascript-](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-why-jquery-over-javascript-)
3. [what-is-bootstrap](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-bootstrap)

## API
1. [how-you-test-json-implementation](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-you-test-json-implementation)
2. [what-are-restful-annotations](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-are-restful-annotations)
3. [write-code-to-hit-new-api-request-from-your-code](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-write-code-to-hit-new-api-request-from-your-code)
4. [what-are-different-types-of-http-status-codes](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-are-different-types-of-http-status-codes)
5. [when-to-use-path-param-or-when-to-use-query-param-as-per-design-perspective](https://github.com/emranxec/KeepLearning#q-when-to-use-path-param-or-when-to-use-query-param-as-per-design-perspective)


## DSA & design
1. [Design patterns](https://github.com/emranxec/KeepLearning/blob/main/designPattern/programs.utilClasses.interviewQuestions.md)
2. [design-patterns-in-spring](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-design-patterns-in-spring)
3. [what-are-microservices-design-patterns](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-are-microservices-design-patterns)
4. [what-are-design-principles](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-are-design-principles)
5. [data-structure-and-usages](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-if-the-equals-method-is-overridden-without-overriding-hashcode-or-vice-versa)

## JAVA
1. [what-factory-class-java-having](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-factory-class-java-having)
2. [can-mutable-object-is-instance-of-immutable-class-how-to-fix_NOT_RESOLVED](https://github.com/emranxec/KeepLearning/blob/main/README.md#q--can-mutable-object-is-instance-of-immutable-class-how-to-fix)
3. [explain-how-to-create-user-defined-annotations-](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-explain-how-to-create-user-defined-annotations-)
4. [what-data-structure-does-executer-service-hold](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-data-structure-does-executer-service-hold)
5. [why-string-immutable](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-why-string-immutable-)
6. [what-is-class-not-found-and-no-class-def-error](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-class-not-found-and-no-class-def-error)
7. [is-static-method-override-possible](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-is-static-method-override-possible)
8. [explain-save-update-save-and-persist-methods](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-explain-saveupdate-save-and-persist-methods)
9. [string-vs-string-builder](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-string-vs-string-builder)
10. [how-to-configure-techniques-of-jvm](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-to-configure-techniques-of-jvm)
11. [why-serialize-a-object-how-to-serialize-and-deserialize-object](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-why-serialize-a-object-how-to-serialize-and-deserialize-object)
12. [why-concurrent-hashmap-used](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-why-concurrent-hashmap-used)
13. [linked-hashmap-internal-works](https://github.com/emranxec/KeepLearning/blob/main/README.md#q--linkedhashmap-internal-works)
14. [what-is-weak-hashmap](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-weak-hashmap)
15. [what-is-reflection-api](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-reflaction-api-javalangreflect)
16. [what-are-different-types-of-class-loader](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-are-different-types-of-class-loader)
17. [garbage-collectors-what-are-diff-types-of-garbage-collector-different-method-of-garbage-collector](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-garbage-collectors-what-are-diff-types-of-garbage-collector-different-method-of-garbage-collector)
18. [try-with-resources-vs-try-with-finally](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-try-with-resources-vs-try-with-finally)
19. [explain-stackoverflow-vs-oom](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-explain-stackoverflow-vs-oom)
20. [why-overloading-and-over-loading-concept](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-why-overloading-and-over-loading-concept)
21. [is-synchronized-block-entire-object](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-is-synchronized-block-entire-object)
22. [can-the-keys-in-hashing-data-structure-be-made-mutable](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-can-the-keys-in-hashing-data-structure-be-made-mutable)
23. [discuss-comparable-and-comparator-which-one-should-be-used](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-discuss-comparable-and-comparator-which-one-should-be-used-in-a-given-scenario)
24. [what-is-difference-between-sleep-yield-and-wait-method](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-difference-between-sleep-yield-and-wait-method)
25. [string-class-to-be-immutable](https://github.com/emranxec/KeepLearning#q-why-string-immutable-)
26. [prevent-breaking-a-singleton-class-pattern](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-prevent-breaking-a-programssingleton-class-pattern)
27. [the-contract-between-equals-and-hashcode-methods-in-java](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-the-contract-between-equals-and-hashcode-methods-in-java)
28. [equals-method-is-overridden-without-overriding-hashcode-or-vice-versa](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-if-the-equals-method-is-overridden-without-overriding-hashcode-or-vice-versa)

## Java 8
1. [what-is-sequential--parallel-streams](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-sequential--parallel-streams)
2. [map-vs-flatmap](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-map-vs-flatmap)
3. [what-is-java-steams](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-java-steams)
4. [function-vs-bi-function](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-function-vs-bifunction)
5. [mapping-vs-flat-mapping](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-mapping-vs-flat-mapping)
6. [what-function-is-java-8-filter-backend](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-function-is-java-8-filter-backend)
7. [what-are-new-features-added-in-java-8](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-are-new-features-added-in-java-8)
8. [what-is-optional-and-what-is-it-best-used-for](https://github.com/emranxec/KeepLearning#q-what-is-optional-and-what-is-it-best-used-for)


## Spring
1. [why-spring-boot](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-why-spring-boot)
2. [how-to-configure-profile-in-spring-boot](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-to-configure-profile-in-spring-boot)
3. [how-to-connect-db-from-spring](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-to-connect-db-from-spring)
4. [what-is-spring-actuators](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-spring-actuators)
5. [what-is-spring-global-exception](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-spring-global-exception)
6. [flow-of-spring-mvc](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-flow-of-spring-mvc)
7. [how-to-handle-transactions-in-spring](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-to-handle-transactions-in-spring)
8. [what-is-auto-wire-usage](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-autowire-usage)
9. [basic-packages-requires-to-create-spring-boot-application](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-basic-packages-requires-to-create-spring-boot-application)
10. [explain-spring-security](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-explain-spring-security)
11. [how-to-convert-data-in-rest-response-in-spring](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-to-convert-data-in-rest-response-in-spring)
12. [what-is-service-layer-in-spring](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-service-layer-in-spring)
13. [do-we-need-dao-layer-if-we-have-service-layer](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-do-we-need-dao-layer-if-we-have-service-layer)
14. [what-is-default-spring-bean-status](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-default-spring-bean-status)
15. [how-you-validate-the-request-param-and-path-param-done-in-spring](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-you-validate-the-request-param-and-path-param-done-in-spring)
16. [explain-bean-lifecycle](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-explain-bean-lifecycle)
17. [why-to-override-run-in-spring-application](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-why-to-overide-run-in-springapplication)
18. [difference-between-primary-qualifier](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-difference-between-primary--qualifier)
19. [controller-vs-rest-controlled](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-controller-vs-rest-controlled)
20. [how-to-manage-two-different-session-factory-transaction](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-to-manage-two-different-session-factory-transaction)
21. [what-is-inversion-of-control-or-dependency-injection](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-inversion-of-control-or-dependency-injection)
22. [default-security-configuration-and-how-we-can-disable-or-customize](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-the-default-security-configuration-and-how-we-can-disable-or-customize)
23. [define-all-spring-annotations](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-define-all-spring-annotations-)
24. [load-only-75-of-bean-classes-in-spring-how-to-achieve-it](https://github.com/emranxec/KeepLearning#q-if-we-want-to-load-only-75-of-bean-classes-in-spring-how-to-achieve-it)
25. [can-we-use-component-configuration-classes-be-final](https://github.com/emranxec/KeepLearning#q-can-we-use-componentconfiguration-classes-be-final)
26. [difference-between-application-properties-vs-application-yml--which-one-to-use-when](https://github.com/emranxec/KeepLearning#q-difference-between-applicationproperties-vs-applicationyml--which-one-to-use-when)
27. [singleton-scope-in-spring-vs-singleton-class-in-java](https://github.com/emranxec/KeepLearning#q-singleton-scope-in-spring-vs-singleton-class-in-java)
28. [how-to-create-bean](https://github.com/emranxec/KeepLearning#q-how-to-create-bean)
29. [difference-between-inject-vs-autowire-vs-resource](https://github.com/emranxec/KeepLearning#q-the-difference-between-inject-vs-autowire-vs-resource)

## Hibernate
1. [jdbc-versus-hibernate](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-jdbc-versus-hibernate)
2. [explain-transactions-in-hibernate](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-explain-transactions-in-hibernate)
3. [explain-dirty---hibernate](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-explain-dirty---hibernate)
4. [when-to-used-native-query--hibernate-query](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-when-to-used-native-query--hibernate-query)
5. [what-is-criteria-in-hibernate-](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-criteria-in-hibernate-)
6. [what-is-states-of-hibernate-attribute](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-states-of-hibernate-attribute)
7. [at-what-time-rollback-gets-called](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-at-what-timeplace-rollback-gets-called)
8. [explain-hibernate-caching-how-to-configure-ehcache](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-explain-hibernate-caching-how-to-configure-ehcache)
9. [explain-hibernate-inheritance](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-explain-hibernate-inheritance)
10. [what-are-different-library-for-hibernate](https://github.com/emranxec/KeepLearning/blob/main/README.md#q--what-are-different-library-for-hibernate)
11. [hibernate-optimal-usage-of-memory-network-and-cpu](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-will-you-handle-batch-insert-in-hibernate-for-optimal-usage-of-memory-network-and-cpu)
12. [one-to-many-and-many-to-many](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-are-onetoone-onetomany-and-manytomany-relationship-mappings-in-database-design)
13. [how-lazy-loading-works-for-collection-of-objects-and-what-is-n1-problem](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-lazy-loading-works-for-collection-of-objects-and-what-is-n1-problem-)
14. [explain-mapped-by](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-explain-mappedby)
15. [What is Cascade in hibernate?](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-cascade-in-hibernate)
16. [difference-between-the-sessionget-method-and-the-sessionload-method](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-the-difference-between-the-sessionget-method-and-the-sessionload-method)
17. [general-considerations-or-best-practices-for-defining-your-hibernate-persistent-classes](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-are-the-general-considerations-or-best-practices-for-defining-your-hibernate-persistent-classes)

## SQL
1. [sql-queries-with-functions--stored-procedures](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-sql-queries-with-functions--stored-procedures)
2. [how-to-avoid-sql-injection](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-to-avoid-sql-injection)
3. [where-vs-having-in-sql](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-where-vs-having-in-sql)
4. [what-is-difference-between-primary-key-and-unique-key](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-difference-between-primary-key-and-unique-key)
5. [why-do-we-need-indexing-on-database-table-columns](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-why-do-we-need-indexing-on-database-table-columns)
6. [what-is-difference-between-drop-truncate-and-delete-commands-in-sql](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-difference-between-drop-truncate-and-delete-commands-in-sql)
7. [what-are-clustered-and-non-clustered-indexes-in-database](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-are-clustered-and-non-clustered-indexes-in-database)
8. [pessimistic-approach-and-optimistic-approach-in-dbms](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-if-the-equals-method-is-overridden-without-overriding-hashcode-or-vice-versa)
9. What are Indexes and Its Types?

## Maven & GIT
1. [explain-maven-in-detail-explain-pom.xml-in-detail](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-explain-maven-in-detail-explain-pomxml-in-detail)
2. [git-rebase-vs-git-merge-which-is-better](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-git-rebase-vs-git-merge-which-is-better)

## Docker and microservices
1. [what-is-docker](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-docker)
2. [why-microservices](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-why-microservices)
3. [what-db-model-is-preferred-in-microservice-architecture](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-db-model-is-prefered-in-microservice-architecture)
4. [how-to-convert-monolithic-application-to-microservices](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-to-convert-monolithic-application-to-microservices)
5. [explain-microservice-framework-netflix PENDING](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-explain-microservice-framework-netflix)
6. [mqs](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-mqs)

## Programs
1. [how-to-create-an-immutable-class](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-to-create-an-immutable-class)
2. [remove-duplicate-using-streams](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-remove-duplicate-using-streams)
3. [single-instance-should-run-for-that-application](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-if-the-equals-method-is-overridden-without-overriding-hashcode-or-vice-versa)
4. [print-second-highest-number-from-stream](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-if-the-equals-method-is-overridden-without-overriding-hashcode-or-vice-versa)
5. [java-code-to-segregate-0s-and-1s-in-an-array](https://github.com/emranxec/KeepLearning/blob/main/README.md#q--java-code-to-segregate-0s-and-1s-in-an-array)
6. [given-an-array-find-which-pattern-it-matches](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-given-an-array-find-which-pattern-it-matches)
7. [use linkedList and find middle element but don't use size](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-use-linkedlist-and-find-middle-element-but-dont-use-size)
8. [create a singleton class and protect it from breaking](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-create-a-singleton-class-and-protect-it-from-breaking)
9. [create enum and print all enum elements and find is something is present](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-create-enum-and-print-all-enum-elements-and-find-is-something-is-present)
10. [Design a new implementation of the Map interface](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-design-a-new-implementation-of-the-map-interface)
11. [print some patterns in java](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-print-some-patterns-in-java)
12. [print Fibonacci](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-print-fibonacci)
13. [do-iterator-operations-on-employee-list](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-do-itertor-operations-on-employee-list)
14. [sum of the squares of all the odd numbers in the array.](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-sum-of-the-squares-of-all-the-odd-numbers-in-the-array)
15. [Given an array of n integers and a number k, find the pairs of numbers in the array such that the difference between the pair is k.](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-given-an-array-of-n-integers-and-a-number-k-find-the-pairs-of-numbers-in-the-array-such-that-the-difference-between-the-pair-is-k)
16. [Write a function to return the longest even length word in a sentence.](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-write-a-function-to-return-the-longest-even-length-word-in-a-sentence)
17. [Write a function to count the number of unique digits in a number](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-write-a-function-to-return-the-longest-even-length-word-in-a-sentence)
18. [god => print -> //god,ogd,dgo,gdo,odg,dog (permute)](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-god--print---godogddgogdoodgdog-permute)
19. [Find an element in array such that sum of left array is equal to sum of right array](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-check-if-pivot-or-not)
20. [check the output of employee and address class](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-check-the-output-of-employee-and-address-class)
21. [get only employee having dept = "IT" && Convert in map key--id, value--Employee,Employee count based on depart](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-get-only-employee-having-dept--it--convert-in-map-key--id-value--employee)
22. [merge the linked list of integer and contact as string](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-merge-the-linked-list-of-integer-and-contact-as-string)
23. [print all words start with G using streams?](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-print-all-words-start-with-g-using-streams)
24. [Find some random name in java](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-find-some-random-name-in-java)
25. [design a class to throw exception on 2nd constructor](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-design-a-class-to-throw-exception-on-2nd-constructor)
26. [sort-hashmap-on-basis-of-value](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-sort-hashmap-on-basis-of-value)

## SQL Queries
1. [nth-highest-age-from-employee-table-using-sql](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-would-you-fetch-employee-with-nth-highest-age-from-employee-table-using-sql)
2. [all the employee name from department joined in which year](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-all-the-employee-name-from-department--ab--which-department-has-maximum-employees-join-which-year)
3. [print all children and all parents](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-print-all-children-and-all-parents)
4. [print 4th highest salary](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-print-4th-highest-salary)
5. [write a query for self join](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-write-a-query-for-self-join)


## Self:
1. [ ]  [how-you-identify-which-asset-type](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-you-identify-which-asset-type)
2. [ ]  [test-your-application](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-test-your-application)
3. [ ]  [how-to-process-10000-request-handling-at-once--persist-in-db-](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-to-process-10000-request-handling-at-once--persist-in-db-)
4. [ ]  [load-a-big-transactional-file-and-fetch-the-trnasction-records-using-best-data-structures](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-load-a-big-trnsactional-file-and-fetch-the-trnasction-records-using-best-data-structures)
5. [ ]  [how-to-load-balance-in-60-40-weightage-](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-how-to-load-balance-in-60-40-weightage-)
6. [ ]  [explain-thread-with-caching](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-explain-thread-with-caching)

----
### Q. how to create an immutable class?
 #### When the state of object can not be changed after its construction then the object is called Immutable.

- Immutable objects are inherently thread-safe
- Immutable classes are easy to understand, as they possess a single state, which is controlled by their constructor.
- Immutable objects are good candidate for hash keys because their hashcode can be cached and reused for better performance. 

 > Immutable class in java means that once an object is created, we cannot change its content. 
 > In Java, all the wrapper classes (like Integer, Boolean, Byte, Short) and String class is immutable. 
 > We can create our own immutable class as well.
 
#### Following are the requirements:
  - The class must be declared as final so that child classes can’t be created.
  - Data members in the class must be declared private so that direct access is not allowed.
  - Data members in the class must be declared as final so that we can’t change the value of it after object creation.
  - A parameterized constructor should initialize all the fields performing a deep copy so that data members can’t be modified with an object reference.
  - Deep Copy of objects should be performed in the getter methods to return a copy rather than returning the actual object reference)

[programs.utilClasses.ImmutableOne.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs.utilClasses.ImmutableOne.java)

```java
final class programs.utilClasses.immmutableClass{
    final private String name;
    final private List list;

    programs.utilClasses.immmutableClass(String name){
        this.name=name;
    }
    String getName(){
        return name;
    }
    public List<String> getList() {
        return Collections.unmodifiableList(list); // defensive copy of the mutable field before returning it to caller
    }
}
```
##### Example of Immutable Classes in JDK
> All primitive Wrapper classes (Number, Integer, Long, Float, Double, etc), String Class, Color Class, BigInteger
> & BigDecimal class, CopyOnWriteArrayList & CopyOnWriteArraySet


----
### Q. what is sequential & parallel streams? (java.util.stream)

- A stream in Java is a sequence of objects which operates on a data source such as an array or a collection and supports various methods.
- It was introduced in Java 8’s java.util.stream package. 
> Stream supports many aggregate operations like filter, map, limit, reduce, find, and match to customize the original data into a different form according to the need of the programmer. 
> The operations performed on a stream do not modify its source hence a new stream is created according to the operation applied to it. 
> The new data is a transformed copy of the original form.

[parallel-vs-sequential-stream-in-java](https://www.geeksforgeeks.org/parallel-vs-sequential-stream-in-java/) 
```java
public class programs.utilClasses.interviewQuestions {
  private static void parralelvsSequencial() {
        String[] strings = {"1", "2", "3", "4", "5", "6", "7", "8", "9", "10"};

        System.out.println("-------\nRunning sequential\n-------");
        run(Arrays.stream(strings).sequential());
        System.out.println("-------\nRunning parallel\n-------");
        run(Arrays.stream(strings).parallel());
    }
 }
```
----
### Q. remove duplicate using streams?

- You can use the Stream.distinct() method to remove duplicates from a Stream in Java 8 and beyond.
- The distinct() method behaves like a distinct clause of SQL, which eliminates duplicate rows from the result set.

```
List<Integer> withDupes = Arrays.asList(10, 10, 20, 20, 30, 30, 40, 50); 
System.out.println("List with duplicates: " + withDupes); 
List<Integer> withoutDupes = withDupes.stream() .distinct() .collect(Collectors.toList());
```
----
### Q. design patterns in spring?

> ### programs.Singleton Pattern
>The singleton pattern is a mechanism that ensures only one instance of an object exists per application. 

>This pattern can be useful when managing shared resources or providing cross-cutting services, such as logging.

#### programs.Singleton Beans
> Generally, a singleton is globally unique for an application, but in Spring, this constraint is relaxed. Instead, Spring restricts
> a singleton to one object per Spring IoC container. 

>In practice, this means Spring will only create one bean for each type per application context.

#### Autowired Singletons
> we can create two controllers within a single application context and inject a bean of the same type into each.
> First, we create a BookRepository that manages our Book domain objects.

> Next, we create LibraryController, which uses the BookRepository to return the number of books in the library
> In the application output, we see that both BookRepository objects have the same object ID
```java
@RestController
public class LibraryController {

    @Autowired
    private BookRepository repository;
}
@RestController
public class BookController {

    @Autowired
    private BookRepository repository;
}
```
> NOTE: We can create separate instances of the BookRepository bean by changing the bean scope from singleton to prototype
> using the @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE) annotation. 
> [we can change scope by](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-default-spring-bean-status)

### Factory Method Pattern

#### Application Context
> Spring uses this technique at the root of its Dependency Injection (DI) framework.
> Fundamentally, Spring treats a bean container as a factory that produces beans.
> Thus, Spring defines the BeanFactory interface as an abstraction of a bean container:
```java
public interface BeanFactory {

    getBean(Class<T> requiredType);

    getBean(Class<T> requiredType, Object... args);

    getBean(String name);

    // ...
}
```

> Each of the getBean methods is considered a factory method, which returns a bean matching the criteria supplied to the method, like the bean's type and name.
> Spring then extends BeanFactory with the ApplicationContext interface, which introduces additional application configuration. 

### Proxy Pattern

#### Transactions
> To create a proxy, we create an object that implements the same interface as our subject and contains a reference to the subject.
> We can then use the proxy in place of the subject.

> In Spring, **beans are proxies to control access to the underlying bean**. We see this approach when using transactions:
```java
@Service
public class BookManager {

    @Autowired
    private BookRepository repository;

    @Transactional
    public Book create(String author) {
        System.out.println(repository.getClass().getName());
        return repository.create(author);
    }
}
```
>In our BookManager class, we annotate the create method with the @Transactional annotation. 
> This annotation instructs Spring to atomically execute our create method. Without a proxy, 
> Spring wouldn't be able to control access to our BookRepository bean and ensure its transactional consistency.

### Template Method Pattern

#### JdbcTemplate
> The JdbcTemplate class provides the query method, which accepts a query String and ResultSetExtractor object:
```java
public class JdbcTemplate {

    public <T> T query(final String sql, final ResultSetExtractor<T> rse) throws DataAccessException {
        // Execute query...
    }

    // Other methods...
}
```

> The ResultSetExtractor converts the ResultSet object — representing the result of the query — into a domain object of type T:
```java
@FunctionalInterface
public interface ResultSetExtractor<T> {
T extractData(ResultSet rs) throws SQLException, DataAccessException;
}
```

> Spring further reduces boilerplate code by creating more specific callback interfaces.
> For example, the RowMapper interface is used to convert a single row of SQL data into a domain object of type T.

```java
@FunctionalInterface
public interface RowMapper<T> {
T mapRow(ResultSet rs, int rowNum) throws SQLException;
}
```
>With this converter, we can then query a database using the JdbcTemplate and map each resulting row:
```
JdbcTemplate template = // create template...
template.query("SELECT * FROM books", new BookRowMapper());
```
>Apart from JDBC database management, Spring also uses templates for:
- Java Message Service (JMS)
- Java Persistence API (JPA)
- Hibernate (now deprecated)
- Transactions

----
### Q. how to connect DB from spring?

- Step 1: Creating a MySQL Database
```roomsql
> CREATE DATABASE restapi;
> USE restapi;
> CREATE TABLE blog (
> id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
> title VARCHAR(500) NOT NULL,
> content VARCHAR(5000) NOT NULL
);
```
- Step 2: Append MySQL Dependencies
```xml
<dependencies>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-jpa</artifactId>
</dependency>
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
</dependency>
</dependencies>
```
- Step 3: Set Spring Boot MySQL Connection Configuration (Application.properties)

> spring.datasource.url=jdbc:mysql://localhost:3306/restapi

> spring.datasource.username=root

> spring.datasource.password=

>#Statitcs and SQL logs

>spring.jpa.show-sql=true

>spring.jpa.properties.hibernate.format_sql=true

>spring.jpa.properties.hibernate.generate_statistics=true

>#Enable this section based on your preferences

>#logging.level.org.hibernate.type=trace

>#logging.level.org.hibernate.stat=debug

> logging.level.org.springframework=DEBUG

> logging.level.com.acme.your.code=INFO

logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

- Step 4: Build a Repository Class for Spring Boot
- Step 5: Convert the Blog Class to Entity
```java
/**
 * Build a Repository Class for Spring Boot
 */
@Repository
public interface BlogRespository extends JpaRepository<Blog, Integer> {

    // custom query to search to blog post by title or content
    List<Blog> findByTitleContainingOrContentContaining(String text, String textAgain);  
    }

    /*save(S entity)
    findById(ID id)
    findOne()
    findAll()*/
/**
 * Convert the Blog Class to Entity
 */
@Entity
public class Blog {
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private int id;

    private String title;
    private String content;

    public Blog() {  }
    }
 ```
- Step 6: Add the Controller to Spring Boot MySQL Integration
 ```
@Autowired
BlogRespository blogRespository;
 ```
>This will allow you to use blogRepository anywhere in your controller without having to repeatedly instantiate it

 [spring-boot-with-hibernate](https://www.javadevjournal.com/spring-boot/spring-boot-with-hibernate/)

----
### Q. what is spring actuators?
>Actuator brings production-ready features to our application.

>Monitoring our app, gathering metrics, understanding traffic, or the state of our database become trivial with this dependency.

>The main benefit of this library is that we can get production-grade tools without having to actually implement these features ourselves.

>Actuator is mainly used to expose operational information about the running application — health, metrics, info, dump, env, etc. 

> It uses HTTP endpoints or JMX beans to enable us to interact with it.


###### Advantages of Monitoring/Managing the Application
- It increases customer satisfaction.
- It reduces downtime.
- It boosts productivity.
- It improves Cyber security Management.
- It increases the conversion rate.

##### In Maven:
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
```
###### by default, all Actuator endpoints are now placed under the /actuator path.

###### Enable All Endpoints
- We need to add the following configuration to expose all endpoints:
>management.endpoints.web.exposure.include=*

- To explicitly enable a specific endpoint (e.g., /shutdown), we use:
>management.endpoint.shutdown.enabled=true

- To expose all enabled endpoints except one (e.g., /loggers), we use:
>management.endpoints.web.exposure.include=*

>management.endpoints.web.exposure.exclude=loggers

[spring-boot-actuator](https://www.geeksforgeeks.org/spring-boot-actuator/)

----
### Q. Map vs flatMap?
> map() can be used where we have to map the elements of a particular collection to a certain function, and then we need to return the stream which contains the updated results.
> Example: Multiplying All the elements of the list by 3 and returning the updated list.

> flatMap() can be used where we have to flatten or transform out the string, as we cannot flatten our string using map().
> Example: Getting the 1st Character of all the String present in a List of Strings and returning the result in form of a stream.
 ```
 
List list = fruit.stream()
.map(s -> s.length())
.collect(Collectors.toList());

 List<List<Integer> > number = new ArrayList<>();
       
// adding the elements to number arraylist
number.add(Arrays.asList(1, 2));
number.add(Arrays.asList(3, 4));
        
List<Integer> flatList
= number.stream()
.flatMap(list -> list.stream())
.collect(Collectors.toList());

 // todo : its works like  = Stream<List<Integer>>  ==> Stream<Integer>

 ```
> [difference-between-map-and-flatmap-in-java-stream](https://www.geeksforgeeks.org/difference-between-map-and-flatmap-in-java-stream/) 
----
### Q. what is spring global exception?
> Spring framework offers developers several options for handling exceptions in their applications.
> One of which is global exception handler with @ControllerAdvice and @ExceptionHandler annotations
 ```java
@ControllerAdvice
public class GlobalExceptionHandler {
        
    @ExceptionHandler(TeacherNotFoundException.class)
    public ResponseEntity<Object> handleExceptions( TeacherNotFoundException exception, WebRequest webRequest) {
        ExceptionResponse response = new ExceptionResponse();
        response.setDateTime(LocalDateTime.now());
        response.setMessage("Not found");
        ResponseEntity<Object> entity = new ResponseEntity<>(response,HttpStatus.NOT_FOUND);
        return entity;
    }
    // handlers for other exceptions...
}

public class ExceptionResponse { }
@RestController
public class ResourceController {

    @Autowired
    ResourceService resourceService;

    @GetMapping("/getTeacherDetails/{id}")
    public Teacher getTeacherDetails(@PathVariable("id") int id){
        Teacher teacher = resourceService.getTeacherDetails(id);
        if(teacher == null)
            throw new TeacherNotFoundException();

        return teacher;
    }
}
 ```
[spring-boot-global-exception-handling](https://www.studytonight.com/spring-boot/spring-boot-global-exception-handling)

----
### Q.  what is Azure function?

> Azure Functions is a serverless solution that allows you to write less code, maintain less infrastructure, 
> and save on costs. Instead of worrying about deploying and maintaining servers, 
> the cloud infrastructure provides all the up-to-date resources needed to keep your applications running.
----

### Q. what is Azure kubernate?

>Azure Kubernetes Service is a managed container orchestration service based on the open source 
> Kubernetes system, which is available on the Microsoft Azure public cloud. An organization can 
> use AKS to handle critical functionality such as deploying, scaling and managing Docker containers and container-based applications.\
----
### Q. what is responsive UI in JS?

> Responsive design is a graphic user interface (GUI) design approach used to create content that adjusts smoothly 
> to various screen sizes. Designers size elements in relative units (%) and apply media queries, 
> so their designs can automatically adapt to the browser space to ensure content consistency across devices.

----
### Q. what is Serverless computing?
> Serverless computing allows you to build and run applications and services without thinking about servers. 
> With serverless computing, your application still runs on servers, but all the server management is done by AWS.
----
### Q. what is java steams?
> Introduced in Java 8, the Stream API is used to process collections of objects. 

> A stream is a sequence of objects that supports various methods which can be pipelined to produce the desired result.

#### The features of Java stream are –
- A stream is not a data structure instead it takes input from the Collections, Arrays or I/O channels.
- Streams don’t change the original data structure, they only provide the result as per the pipelined methods.
- Each intermediate operation is lazily executed and returns a stream as a result, 
- hence various intermediate operations can be pipelined. 
- Terminal operations mark the end of the stream and return the result.
----
### Q. what factory class java having?

#### This design pattern has been widely used in JDK, such as
- **getInstance()** method of java.util.Calendar, NumberFormat, and ResourceBundle uses factory method design pattern. 
- All the wrapper classes like Integer, Boolean etc, in Java uses this pattern to evaluate the values using **valueOf()** method.
- java.nio.charset.**Charset.forName()**, 
- java.sql.**DriverManager#getConnection()**, 
- java.net.**URL.openConnection()**, 
- java.lang.**Class.newInstance()**, 
- java.lang.**Class.forName()** are some of their example where factory method design pattern has been used.
----
### Q. flow of Spring MVC?
> ![MVC](https://user-images.githubusercontent.com/16031518/196950237-c8c079a6-ebd3-448a-aab8-a35486abf2ec.png)
----
### Q. How you test json implementation?
 ```java
@Test
class test {
    public void givenUserDoesNotExists_whenUserInfoIsRetrieved_then404IsReceived()
            throws ClientProtocolException, IOException {

        // Given
        String name = RandomStringUtils.randomAlphabetic(8);
        HttpUriRequest request = new HttpGet("https://api.github.com/users/" + name);

        // When
        HttpResponse httpResponse = HttpClientBuilder.create().build().execute(request);

        // Then
        assertThat(
                httpResponse.getStatusLine().getStatusCode(),
                equalTo(HttpStatus.SC_NOT_FOUND));
    }
}
 ```
----
### Q.  can mutable object is instance of immutable class? how to fix? 

- can private constructer of immutable class always create a new object of mutable instance? 
- getter of immutable class always return a new object of mutable instance? 
- what if we have a mutable instance in your immutable class such as Date? 
- in private constructor of your immutable class always? 
- create a new instance of mutable field? 
- and in getter always return a new instance of mutable field?
>
----
### Q. what is SAAS?
> What is SaaS? Software as a service (or SaaS) is a way of delivering applications over the Internet—as a service. 
> Instead of installing and maintaining software, you simply access it via the Internet, 
> freeing yourself from complex software and hardware management.

> eg. Netflix, Spotify, Dropbox and Slack are common SaaS products, in which the product 
> is then delivered to users over the internet on a subscription basis, 
> giving users the flexibility to not have to worry about upfront installation purchases or ongoing maintenance costs.
----
### Q. How to handle Transactions in Spring?
> #### Using @Transactional power
> As we defined before, in a transaction, if a single process fails then all transactions should fail. 
> We can implement this behavior using @Transactional annotation.

 ```java
@Service
public class TransferService {

private UserService userService;
private AccountService accountService;

@Autowired
public TransferService(UserService userService, AccountService accountService) {
this.userService = userService;
this.accountService = accountService;
}

@Transactional // This makes all difference
public void transferMoney(long accountFrom, long accountTo){
try {
userService.validateUserAccount(accountTo);
accountService.validateAccountMoney(accountFrom);
accountService.discountMoneyFromAccount(accountFrom);
accountService.addMoneyToAccount(accountTo);
} catch (TrasferException e) {
// Something in case the transaction fails
}
}

}
 ```
> @Transactional will make sure all our operations are successfully executed, 
> if not, it will roll back all operations at the database as if nothing happened.
> Resuming why we should use transaction management:
> Transactional operations are atomic units
> The same connection is reused across all transactions.

* To keep in mind, @Transactional could be used at class level too,
* then all inner methods will be considered single transaction. 

#### Isolation
> Spring allows managing the isolation level. The default strategy for most databases is READ_COMMITTED,
> but we have other ones such as: READ_UNCOMMITTED, REPEATABLE_READ and SERIALIZABLE.

- READ_COMMITTED will only read committed operations to the database and maintain us safe from dirty reads.
- READ_UNCOMMITTED allows the current transaction to read the uncommitted changes from another transaction. The lowest isolation level.
- REPEATABLE_READ prevent dirty reads and if one row is read more than one time in a single transaction, the read result will always be the same.
- SERIALIZABLE prevents non-repeatable reads, dirty reads, and phantom reads. Has impact on performance.

#### Propagation
>Below are propagation levels:
- REQUIRED 
- REQUIRES_NEW 
- SUPPORTS 
- MANDATORY 
- NEVER 
- NOT_SUPPORTED 
- NESTED

#### Rollback rules
>We can add specific configuration to allow rollback or non-rollback depending on the exception thrown:
```
@Transactional(rollbackFor=MyException.class, noRollbackFor=OtherException.class)
public void addMoneyToAccount(long account) {
```

- [spring-core-managing-transactions](https://medium.com/javarevisited/spring-core-managing-transactions-effectively-781bba6c47e8)
- [Transaction Management](https://docs.spring.io/spring-framework/docs/4.2.x/spring-framework-reference/html/transaction.html)

----
### Q. explain Transactions in hibernate?

### Transaction Interface in Hibernate
> In hibernate framework, we have Transaction interface that defines the unit of work. 
> It maintains abstraction from the transaction implementation (JTA,JDBC).
> A transaction is associated with Session and instantiated by calling session.beginTransaction().

#### The methods of Transaction interface are as follows:
- _void begin()_ starts a new transaction. 
- _void commit()_ ends the unit of work unless we are in **FlushMode.NEVER.** 
- _void rollback()_ forces this transaction to rollback. 
- _void setTimeout(int seconds)_ it sets a transaction timeout for any transaction started by a subsequent call to begin on this instance. 
- _boolean isAlive()_ checks if the transaction is still alive. 
- _void registerSynchronization(Synchronization s)_ registers a user synchronization callback for this transaction. 
- _boolean wasCommitted()_ checks if the transaction is committed successfully. 
- _boolean wasRolledBack()_ checks if the transaction is rollback successfully.

```java
public void insertStudent() {
Transaction transaction = null;
try (Session session = HibernateUtil.getSessionFactory().openSession()) {
// start a transaction
transaction = session.beginTransaction();

            String hql = "INSERT INTO Student (firstName, lastName, email) " +
                "SELECT firstName, lastName, email FROM Student";
            Query query = session.createQuery(hql);
            int result = query.executeUpdate();
            System.out.println("Rows affected: " + result);

            // commit transaction
            transaction.commit();
        } catch (Exception e) {
            if (transaction != null) {
                transaction.rollback();
            }
        }
    }
```
----
### Q. what are RESTFUL annotations?
#### JAX-RS Annotations
- @Path(‘Path‘)
- @GET
> To retrieve a resource, you shall use HTTP GET. We should not modify the state of resources using HTTP GET method ever.
- @POST 
>To create a resource on the server, use HTTP POST. An example could be new user registration REST endpoint, it will create a new user in the system.
- @PUT 
> To change the state of a resource or to update it on the server, use PUT
- @DELETE 
> To remove or delete a resource on server, use DELETE
- @Produces(MediaType.TEXT_PLAIN [, more-types])
- @Consumes(type[, more-types])
- @PathParam()
- @QueryParam()
- @MatrixParam()
- @FormParam()

----
### Q. write code to hit new api request from your code?

#### Spring RestTemplate
```java
public class PostsClientService {
    public PostDTO[] getAllPosts() {
        try {
            RestTemplate restTemplate = new RestTemplate();
            return restTemplate.getForObject("https://jsonplaceholder.typicode.com/not-posts", PostDTO[].class);
        }
        catch (HttpClientErrorException ex) {
            // here you can do whatever you want with exception
            // in this example we will just print the status code
            System.out.println(ex.getRawStatusCode());
        }
        return new PostDTO[0];
    }
}
```

###### In any case, dealing with errors or any other case like using a custom encoder or decoder for the request or the response will end in :
- more lines of code, probably repeated across many rest call methods.
- harder to maintain in the future.

> **Netflix had to deal with these problems, thus they chose to build their rest client leveraging 
the Spring framework's capabilities: `Feign` was the name given to it.**


[spring-restful-client-resttemplate-example](https://howtodoinjava.com/spring-boot2/resttemplate/spring-restful-client-resttemplate-example/)

#### OpenFeign
```java
@FeignClient(name = "posts-client", url = "https://jsonplaceholder.typicode.com/posts")
public interface PostsClient {
@GetMapping
List<PostDTO> getAllPosts();
}
```

#### So why use Feign?
- we don't need to learn any new syntax,
- easy to read and maintain
- each Feign client is composed of a set of customizable components(Decoder,Encoder,Logger,Contract).

[consuming-rest-api-using-feign/](https://blog.nimbleways.com/consuming-rest-api-using-feign/)

----
### Q. What DB model is prefered in microservice architecture?
>Different services have different data storage requirements. For some services, a relational database 
> is the best choice. Other services might need a NoSQL database such as MongoDB,
> which is good at storing complex, unstructured data, or Neo4J, 
> which is designed to efficiently store and query graph data.
----
### Q. What is @autowire usage?
>The @Autowired annotation provides more fine-grained control over where and how autowiring should be accomplished. 

>The @SpringBootApplication  which is a combination of @Configuration, @EnableAutoConfiguration and @ComponentScan scans 
> all the components or services and other configuration files included in the base and child packages. 

> This will register them in **Spring Context** and inject the beans at runtime using @Autowired.

#### Setter based Autowiring
>@Autowired annotation is optional for constructor based injection. Here, the Red object from the container is passed to the constructor while creating the Color object.


```java
@Qualifier("redBean")
class Red implements Color {
// Class code here
}

@Qualifier("blueBean")
@primary
class Blue implements Color {
// Class code here
}
//creating Red class injection using autowire
class someClass {
    @Autowired
    @Qualifier("redBean")
    public void setColor(Color color) {
        this.color = color;
    }
}
```

####  Property-based Autowiring
> The Red object will be injected into the property Color at run time using @Autowired annotation
```java
@Component
public class someClass {

    private int type;

    @Autowired
    @Qualifier("redBean")
    private Color color;
}
```
####  Constructor-based Autowiring
>  use @Autowired on a constructor, constructor injection happens at the time of object creation.
```java
@Component
public class Customer {
private Color color;
@Autowired
@Qualifier("redBean")
public Customer (Color color) {
this.color=color;
}
}
```
----
### Q. Explain how to create user defined annotations ?

### Create Custom Annotation

```java
//Class Level Annotation
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.Type)
public @interface GFG {
}

//Field Level Annotation
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface GFGElement { 
public String key() default "";
}

//Method Level Annotation
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface Init {
}

//example
@Documented
@Target(ElementType.FIELD)
@Inherited
@Retention(RetentionPolicy.RUNTIME)
public @interface DBField {
    String name();

    Class< ?> type();

    boolean isPrimaryKey() default false;
}

public class User {

    @DBField(name = "id", isPrimaryKey = true, type = Long.class)
    private long id;

    @DBField(name = "name", type = String.class)
    private String name;
}

//Diffrent class
public class AnnotationExample {

    public static void main(String[] args) throws Exception {
        User usr = new User();
        usr.setName("John Doe");
        usr.setId(112);

        for (Field field : usr.getClass().getDeclaredFields()) {
            DBField dbField = field.getAnnotation(DBField.class);
            System.out.println("field name: " + dbField.name());

            // changed the access to public
            field.setAccessible(true);
            Object value = field.get(usr);
            System.out.println("field value: " + value);

            System.out.println("field type: " + dbField.type());
            System.out.println("is primary: " + dbField.isPrimaryKey());
            System.out.println();
        }
    }
}

//output
/*
        field name: id
        field value: 112
        field type: class java.lang.Long
        is primary: true

        field name: name
        field value: John Doe
        field type: class java.lang.String
        is primary: false*/

```
----
### Q. what data structure does executer service hold?

![pool](https://user-images.githubusercontent.com/16031518/197357824-9175b364-59f2-4d9f-9ecb-04e6f63f0511.png)

- LinkedBlockingQueue:
`
 ExecutorService threadPoolExecutor = new ThreadPoolExecutor(corePoolSize, maxPoolSize, keepAliveTime,
        TimeUnit.MILLISECONDS, new LinkedBlockingQueue<Runnable>());
`

#### Jargons in Thread Pool Executors:
1. CorePoolSize
2. MaximumPoolSize
3. KeepAliveTime
4. workQueue
5. ThreadFactory
6. RejectedExecutionHandler(AbortPolicy,CallerRunsPolicy,DiscardPolicy,DiscardOldestPolicy)

#### some inbuilt methods present with above configurations:
1.  Fixed thread pool executor(reuses a fixed number of threads to execute any number of tasks)
2.  Cached thread pool executor( it has maximumPoolSize set to be Infinite.)
3.  Scheduled thread pool executor(Creates a thread pool that can schedule commands to run after a given delay, or to execute periodically.)
4.  Single thread pool executor (Creates single thread to execute all tasks.)

#### Note that ThreadPool has 5 states:
- Running:
- Shutdown:
- Stop:
- Tidying:
- Terminated:

----
### Q. what are Microservices design patterns?
#### Microservices Design Patterns:
- Aggregator
- API Gateway 
- Chained or Chain of Responsibility 
- Asynchronous Messaging 
- Database or Shared Data 
- Event Sourcing 
- Branch 
- Command Query Responsibility Segregator 
- Circuit Breaker 
- Decomposition
> [design-patterns-for-microservices](https://dzone.com/articles/design-patterns-for-microservices)
----
### Q. SQL queries with Functions & stored procedures
#### Stored Procedures
> Stored Procedures are pre-compiled objects which are compiled for the first time and its compiled format is saved, which executes (compiled code) whenever it is called. For more about a stored procedure, please refer to the article Different types of Stored Procedure.
#### Functions
> A function is compiled and executed every time whenever it is called. A function must return a value and cannot modify the data received as parameters. For more about functions, please refer to the article Different types of Functions.

#### Diffrences
- The function must return a value but in Stored Procedure it is optional. Even a procedure can return zero or n values. 
- Functions can have only input parameters for it whereas Procedures can have input or output parameters. 
- Functions can be called from Procedure whereas Procedures cannot be called from a Function. 
- The procedure allows SELECT as well as DML(INSERT/UPDATE/DELETE) statement in it whereas Function allows only SELECT statement in it. 
- Procedures cannot be utilized in a SELECT statement whereas Function can be embedded in a SELECT statement. 
- Stored Procedures cannot be used in the SQL statements anywhere in the WHERE/HAVING/SELECT section whereas Function can be. 
- Functions that return tables can be treated as another rowset. This can be used in JOINs with other tables. 
- Inline Function can be though of as views that take parameters and can be used in JOINs and other Rowset operations. 
- An exception can be handled by try-catch block in a Procedure whereas try-catch block cannot be used in a Function. 
- We can use Transactions in Procedure whereas we can't use Transactions in Function.

----
### Q. Basic packages requires to create spring boot application
#### For instance, we would like to develop a Spring WebApplication with Tomcat WebServer. Then we need to add the following minimal jar dependencies in your Maven’s pom.xml file or Gradle’s build.gradle file

- Spring core Jar file(spring-core-xx.jar)
- Spring Web Jar file(spring-web-xx.jar)
- Spring Web MVC Jar file(spring-webmvc-xx.jar)
- Servlet Jar file(servlet-xx.jar)
####  If we want to add some database stuff, then we need to add database related jars like Spring JDBC jar file, Spring ORM jar files,Spring Transaction Jar file etc.
- Spring JDBC Jar file(spring-jdbc-xx.jar)
- Spring ORM Jar file(spring-orm-xx.jar)
- Spring Transaction Jar file(spring-transaction-xx.jar)
#### Spring Boot Starter Web comes pre-packaged with these.
Dependencies can be classified into:
- Spring - core, beans, context, app
- Web MVC - (Spring MVC)
- Jackson - for JSON Binding 
- Validation - Hibernate Validator, Validation API 
- Embedded Servlet Container - Tomcat 
- Logging - logback, slf4j
----
### Q. What inbuilt server spring uses?
> With SpringBoot, the default embedded server is Tomcat. Other options available are Jetty and UnderTow.
----
### Q. explain Spring security?
> Spring Security is a framework which provides various security features like: authentication, authorization to create secure Java Enterprise Applications.
### Spring Security Features

#### LDAP (Lightweight Directory Access Protocol)
>It is an open application protocol for maintaining and accessing distributed directory information services over an Internet Protocol.

#### Single sign-on
>This feature allows a user to access multiple applications with the help of single account(user name and password).

#### JAAS (Java Authentication and Authorization Service) LoginModule
>It is a Pluggable Authentication Module implemented in Java. Spring Security supports it for its authentication process.

#### Basic Access Authentication
>Spring Security supports Basic Access Authentication that is used to provide user name and password while making request over the network.

#### Digest Access Authentication
>This feature allows us to make authentication process more secure than Basic Access Authentication. It asks to the browser to confirm the identity of the user before sending sensitive data over the network.

#### Remember-me
>Spring Security supports this feature with the help of HTTP Cookies. It remember to the user and avoid login again from the same machine until the user logout.

#### Web Form Authentication
>In this process, web form collect and authenticate user credentials from the web browser. Spring Security supports it while we want to implement web form authentication.

#### Authorization
>Spring Security provides the this feature to authorize the user before accessing resources. It allows developers to define access policies against the resources.

#### Software Localization
>This feature allows us to make application user interface in any language.

#### HTTP Authorization
>Spring provides this feature for HTTP authorization of web request URLs using Apache Ant paths or regular expressions.

### Features added in Spring Security 5.0
#### OAuth 2.0 Login
>This feature provides the facility to the user to login into the application by using their existing account at GitHub or Google. This feature is implemented by using the **Authorization Code Grant** that is specified in the OAuth 2.0 Authorization Framework.

#### Reactive Support
>From version Spring Security 5.0, it provides reactive programming and reactive web runtime support and even, we can integrate with Spring WebFlux.

#### Modernized Password Encoding
>Spring Security 5.0 introduced new Password encoder **DelegatingPasswordEncoder** which is more modernize and solve all the problems of previous encoder **NoOpPasswordEncoder**.

[default-security-configuration-and-how-we-can-disable-or-customize](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-the-default-security-configuration-and-how-we-can-disable-or-customize)

[spring-security-interview-questions](https://www.interviewbit.com/spring-security-interview-questions/)
----
### Q. explain Dirty - Hibernate?
> When an entity object is loaded, a copy of all properties of that entity object is created. 
> At the time of synchronization, which we call flush time, the properties of the entity object are matched 
> with the properties of the loaded object and the difference is checked. 
> This process is called “Hibernate Dirty Check”.

###### Each time, Hibernate checks the properties of the entity object with the last loaded snapshot.If there is a change, it performs the update. That's why this situation is called "Hibernate Dirty Check". In fact, it causes a performance loss.

`Hibernate: select commententity0_.id as id1_1_0_,
commententity0_.text as text2_1_0_, commententity0_.owner
as owner3_1_0_ from comment commententity0_ where commententity0_.id=?`
>
**`Hibernate: update comment set text=? where id=?`**

#### What is the solution?
> When an entity is loaded, the 'Hibernate dirty checking mechanism' compares the snapshot of the current entity
> with the loaded entity, but we can also turn off this comparison when we are not going to update it.
`@Transactional(readOnly = true)`

> If we mark the method we are processing as readOnly = true, there will be no 'Hibernate dirty check' operation,
> as there will be no update operation. **This gives us performance.**
----
### Q. why String immutable ?
> In the String constant pool, a String object is likely to have one or many references. 
> If several references point to the same String without even knowing it, 
> it would be bad if one of the references modified that String value. That’s why String objects are immutable.

#### Why Strings are immutable in nature?
- The String pool cannot be possible if String is not immutable in Java
- A lot of heap space is saved by JRE.
- If we don’t make the String immutable, it will pose a serious security threat to the application.
>  database usernames, passwords are passed as strings to receive database connections.

> The socket programming host and port descriptions are also passed as strings.

> If the String doesn’t remain immutable, any hacker can cause a security issue in the application by changing the reference value.

- The String is safe for multithreading because of its immutableness.
- Immutability gives the security of loading the correct class by Classloader.
> we have an instance where we try to load java.sql.Connection class but the changes in the referenced value to the myHacked.Connection class does unwanted things to our database.

  [java-string-is-immutable](http://geeksforgeeks.org/java-string-is-immutable-what-exactly-is-the-meaning/?ref=lbp)

`String str = "knowledge"`
>
`str = str.concat(" base");`

> At this point in the example above, we have two String objects: the first one we created with value “knowledge”,
> pointed to by s, and the second one “knowledge base”, pointed to by str. But, technically, we have three String
> objects, **the third one being the literal “base” in the concat statement.**
----
### Q. what is Class not found and No class def error?
> **ClassNotFoundException** is raised in the below program as class “MyFirstJavaClass” is not found in the classpath.
```
try {Class.forName("MyFirstJavaClass");
        }
 catch (ClassNotFoundException ex) {
  ex.printStackTrace();
        }
```
> remove any .class file and run that .class when we saw that at Java runtime **NoClassDefFoundError** will be thrown.

- [classnotfoundexception-vs-noclassdeffounderror](https://www.geeksforgeeks.org/classnotfoundexception-vs-noclassdeffounderror-java/?ref=lbp)
----
### Q. is static method override possible?
> We can declare static methods with the same signature in the subclass, 
> but it is not considered overriding as there won't be any run-time polymorphism. Hence the answer is 'No
----
### Q. explain save,update, save and persist methods?

#### Persist (void return type)
-  The persist method is intended to add a new entity instance to the persistence context ( transient to persistent )

>if an instance is already persistent, then this call has no effect for this particular instance (but it still cascades to its relations with cascade=PERSIST or cascade=ALL).

> if an instance is detached, we'll get an exception, either upon calling this method, or upon committing or flushing the session.

```
Person person = new Person();
person.setName("John");
session.persist(person); // not yet saved to the database
// The generation of INSERT statements will occur only upon committing the transaction, or flushing or closing the session.

//The second call to session.persist() causes an exception, so the following code won't work.

session.evict(person); //goes to detached

session.persist(person); // PersistenceException!
```

#### save (return Serializable value) (Hibernate API)
-  Its purpose is basically the same as persist, but it has different implementation details. ( transient to persistent )

```
Person person = new Person();
person.setName("John");
Long id = (Long) session.save(person);

session.evict(person); //goes to detached
Long id2 = (Long) session.save(person); //no exception but assigns it a new identifier
```

#### Merge (returns an object)
-  The main intention of the merge method is to update a persistent entity instance with new field values from a detached entity instance. ( detached to persistent )

> if the entity is detached, it copies upon an existing persistent entity.

> if the entity is transient, it copies upon a newly created persistent entity.

> this operation cascades for all relations with cascade=MERGE or cascade=ALL mapping.

> if the entity is persistent, then this method call doesn't have an effect on it (but the cascading still takes place).

```
Person person = new Person(); 
person.setName("John"); 
session.save(person);

session.evict(person);
person.setName("Mary");

Person mergedPerson = (Person) session.merge(person);
```

#### Update (its return type is void) (Hibernate API)
-   As with persist and save, the update method is an “original” Hibernate method. ( detached to persistent )

```
Person person = new Person();
person.setName("John");
// session.update(person); // PersistenceException!
session.save(person);
session.evict(person);

person.setName("Mary");
session.update(person);
```
#### SaveOrUpdate (its return type is void) ( Hibernate API)
-  Similar to update, we can also use it for reattaching instances. ( detached to persistent )
>The main difference of the saveOrUpdate method is that 
> it doesn't throw an exception when applied to a transient instance, 
> instead it makes this transient instance persistent.

```
Person person = new Person();
person.setName("John");
session.saveOrUpdate(person);
```
[hibernate-save-persist-update-merge-saveorupdate](https://www.baeldung.com/hibernate-save-persist-update-merge-saveorupdate)

----
### Q. how to convert data in rest response in spring?
> Either return text/plain as
```
@RequestMapping(value="/controller", method=GET)
@ResponseBody
public String foo() {
return "Response!";
}
```

>or Set your response type to MediaType.APPLICATION_JSON_VALUE (= "application/json")
```
@GetMapping(produces=MediaType.APPLICATION_JSON_VALUE)
public ResponseEntity<Object> getOneParameterMap() {
    return ResponseEntity.status(HttpStatus.CREATED).body(
            "Response!");
}
```
----
### Q. when to used native query & hibernate query?
###### You do not need to create a native query unless you want to. 

> JPQL eventually is translated into SQL by the framework but the framework lets you call the native query also. 
#### Why would want to do that?
- Low level access, which means that you can optimize and handle the mapping by yourself; with SQL you actually access the database table while with JPQL you access the entity objects; 
- Maybe you do not want to learn JPQL if you already know SQL 
- You already have the queries written in SQL, and do not have resources/time to port them to JPQL
----
### Q. what is criteria in hibernate ?

```java
class DBCOnnections{

public void employeeDetails(){
tx = session.beginTransaction();

        // This will simply return every object that
        // corresponds to the GeekEmployee class.
        Criteria geekEmployeeCriteria
            = session.createCriteria(GeekEmployee.class);
 
        // Here 2 expectations are there one with salary and
        // second one is name. Both are expected to be
        // present. Let us see how to do that
        Criterion salaryExpectation
            = Restrictions.gt("salary", 40000);
 
        Criterion nameExpectation
            = Restrictions.ilike("firstName", "Geek%");
        // As we are combining 2 conditions and that two
        // logically And, we need to add as Restrictions.and
        // To get records matching with AND conditions we
        // need to give below way
        LogicalExpression logicalAndExpression
            = Restrictions.and(salaryExpectation,
                               nameExpectation);
        geekEmployeeCriteria.add(logicalAndExpression);
        
        // setFirstResult-> It takes an integer and it is
        // represented as the first row in your result set,
        // starting with row 0.
 
        geekEmployeeCriteria.setFirstResult(1);
        // setMaxResults->fixed number maxResults of objects
        // are returned here
        geekEmployeeCriteria.setMaxResults(3);
        
           geekEmployeeCriteria.add(
            Restrictions.gt("salary", 20000));
 
        // Display the results in descending order
        geekEmployeeCriteria.addOrder(Order.desc("salary"));
        
          // Get total number of records by using rowcount
        geekEmployeeCriteria.setProjection(
            Projections.rowCount());
        List employeeRowCount = geekEmployeeCriteria.list();
 
        System.out.println("Total row Count: "
                           + employeeRowCount.get(0));
 
        // Getting sum(salary)
        geekEmployeeCriteria.setProjection(
            Projections.sum("salary"));
        List totalSalary = geekEmployeeCriteria.list();
 
        System.out.println("Total Salary of GeekEmployees: "
                           + totalSalary.get(0));
 
        // Getting average(salary)
        geekEmployeeCriteria.setProjection(
            Projections.avg("salary"));
        List averageSalary = geekEmployeeCriteria.list();
        System.out.println(
            "Average Salary of GeekEmployees: "
            + averageSalary.get(0));
 
        // Getting max(salary)
        geekEmployeeCriteria.setProjection(
            Projections.max("salary"));
        List maxSalary = geekEmployeeCriteria.list();
        System.out.println(
            "Maximum Salary among GeekEmployees: "
            + maxSalary.get(0));
 
        // Getting min(salary)
        geekEmployeeCriteria.setProjection(
            Projections.min("salary"));
        
 
        // As a list we can collect them and can iterate
        List geekEmployeeList = geekEmployeeCriteria.list();
 
        for (Iterator iterator
             = geekEmployeeList.iterator();
             iterator.hasNext();) {
            GeekEmployee employee
                = (GeekEmployee)iterator.next();
            System.out.print("First Name: "
                             + employee.getFirstName());
            System.out.print("  Last Name: "
                             + employee.getLastName());
            System.out.println("  Salary: "
                               + employee.getSalary());
        }
        tx.commit();
        }
        }
```
 [hibernate-criteria-queries](https://www.geeksforgeeks.org/hibernate-criteria-queries/)

----
### Q. why jquery over javascript ?

#### JavaScript
> JavaScript is a dynamic, multiparadigm programming language. It is interpreted and not compiled. Therefore, as the name suggests, it is a scripting language.

#### jQuery
> jQuery is a lightweight, feature-rich JavaScript library. It allows us to perform various tasks in a much simpler and quicker way. With jQuery, DOM manipulation, AJAX calls, event handling, and animations become a cinch.

#### Angular JS
> Angular JS can do everything that JQuery does and even much more. It is easy to write and run unit tests in Angular JS applications. Dependency management is effortless and binding dynamic data is powerful. For building testable web applications, we can use Angular JS than JQuery.

#### React
> React Is Faster Than jQuery. One of the biggest things that React has going for it is the use of the Virtual DOM (Document Object Model) instead of the traditional DOM. While jQuery works with the DOM directly, React uses the virtual DOM which is what makes React so much faster.

#### Is Angular better than React? 
>Angular is better than React if your application is enterprise-grade and you need to incorporate complex functionalities like progressive, single-page, and native web apps. However, React specializes in creating UI components and can be used in any application, including single-page apps
----
### Q. what is bootstrap?
> Bootstrap is a free, open source front-end development framework for the creation of websites and web apps. 
> Designed to enable responsive development of mobile-first websites, 
> Bootstrap provides a collection of syntax for template designs.
----
### Q. what is service layer in Spring? 
### Reasons to use :

![service](https://user-images.githubusercontent.com/16031518/201525551-b621274f-425e-4580-86b4-8bdf57a40cd4.jpeg)

- Provides separation of concern-

>Service layer provides code modularity,the business logic and rules are specified in the service layer which in turn calls DAO layer ,the DAO layer is then only responsible for interacting with DB.

- Provides Security -

>If you provide a service layer that has no relation to the DB, then it is more difficult to gain access to the DB from the client except through the service. If the DB cannot be accessed directly from the client (and there is no trivial DAO module acting as the service) then an attacker who has taken over the client cannot have access to your data directly.

- Provide Loose Coupling-

>Service layer can also be used to serve loose coupling in the application.Suppose your controller has 50 methods and in turn it calls 20 Dao methods,Now at later point you decide to change the Dao methods serving these controllers.You need to change all the 50 methods in controller. Instead if you have 20 service methods calling those 20 Dao methods, you need to make change in only 20 Service methods to point to a new Dao.
    
[why-to-use-service-layer-in-spring-mvc](https://blog1.westagilelabs.com/why-to-use-service-layer-in-spring-mvc-5f4fc52643c0)

----
### Q. Do we need DAO layer if we have Service layer?
> They way you put it, the alternative to having a DAO layer is not having a DAO layer. 
> Not having a DAO layer means that the code on the next higher level is responsible 
> for handling low level persistence aspects, which contradicts the principle of single responsibility.

----
### Q. String vs String builder?
- [string-vs-stringbuilder-vs-stringbuffer](https://www.geeksforgeeks.org/string-vs-stringbuilder-vs-stringbuffer-in-java/) 

----
### Q. What is docker?
>Docker is an open platform for developing, shipping, and running applications. Docker enables you to separate your applications from your infrastructure so you can deliver software quickly.

#### What can I use Docker for?
- Fast, consistent delivery of your applications
- Responsive deployment and scaling
- Running more workloads on the same hardware

`docker run -i -t ubuntu /bin/bash`

[docker-cheat-sheet](https://www.docker.com/wp-content/uploads/2022/03/docker-cheat-sheet.pdf)

#### What is Hypervisor?
- A hypervisor is a software that makes virtualization possible. 
- It is also called Virtual Machine Monitor. 
- It divides the host system and allocates the resources to each divided virtual environment.

#### What is virtualization?
- Virtualization is the process of creating a software-based, virtual version of something(compute storage, servers, application, etc.). 
- These virtual versions or environments are created from a single physical hardware system. 
- Virtualization lets you split one system into many sections which act like separate, distinct individual systems.


#### What is containerization?
- code developed on one machine might not work perfectly fine on any other machine because of the dependencies. 
- This problem was solved by the containerization concept. 
- So basically, an application that is being developed and deployed is bundled and wrapped together with all its configuration files and dependencies. 
- This bundle is called a container.

####  What is a Docker Container?
- Docker containers include the application and all of its dependencies. 
- It shares the kernel with other containers, running as isolated processes in user space on the host operating system. 
- Docker containers are not tied to any specific infrastructure: they run on any computer, on any infrastructure, and in any cloud. 
- Docker containers are basically runtime instances of Docker images.

####   What are Docker Images?
- Docker image is the source of Docker container. 
- In other words, Docker images are used to create containers. 
- When a user runs a Docker image, an instance of a container is created. 
- These docker images can be deployed to any Docker environment.

####   What is Docker Hub?
- Docker images create docker containers. 
- There has to be a registry where these docker images live. 
- This registry is Docker Hub. 
- Users can pick up images from Docker Hub and use them to create customized images and containers. 
- Currently, the Docker Hub is the world’s largest public repository of image containers.

####   What is a Dockerfile?
- Docker can build images automatically by reading the instructions from a file called Dockerfile. 
- A Dockerfile is a text document that contains all the commands a user could call on the command line to assemble an image. 
- Using docker build, users can create an automated build that executes several command-line instructions in succession.

####   Tell us something about Docker Compose.
- Docker Compose is a YAML file which contains details about the services, networks, and volumes for setting up the Docker application. 
- So, you can use Docker Compose to create separate containers, host them and get them to communicate with each other. 
- Each container will expose a port for communicating with other containers.

####    What is Docker Machine?
- Docker machine is a tool that lets you install Docker Engine on virtual hosts. 
- These hosts can now be managed using the docker-machine commands. 
- Docker machine also lets you provision Docker Swarm Clusters.

####   What is Docker Swarm?
- Docker Swarm is native clustering for Docker. 
- It turns a pool of Docker hosts into a single, virtual Docker host. 
- Docker Swarm serves the standard Docker API, any tool that already communicates with a Docker daemon can use Swarm to transparently scale to multiple hosts.

####   Docker commands
 - $ docker version
> check for Docker Client and Docker Server version
 - docker info
> get the number of containers running, paused and stopped
 - docker --help
 - docker <command> --help
 - docker login (login into docker repository)
 - docker pull <image_name> (pull an image from docker hub)
> to use a base image and make modifications or personalize it
 - docker run -it -d <image_name> (create a docker container from an image)
> Pull an image from docker repository with the above command and run it to create a container.
 - docker ps (lists down all the running containers)
 - docker exec -it <container id> bash 
> Suppose you have 3 containers running and out of these, you wish to access one of them. How do you access a running container
 - docker start <container_id> (start a docker container)
 - docker stop <container_id> ( stopping a running container)
 - docker kill <container_id> (kill a container with the following command)
 - docker commit <conatainer id> <username/imagename>
> you can use a container, edit it and update it. This sounds complicated but its actually just one command.
 - docker push <username/image name> (push it to docker hub)
 - docker rm <container id> (delete a stopped container)
 - docker rmi <image-id> (delete an image from the local storage system)
 - docker build <path to docker file> ( build a Dockerfile)
 - docker system prune (to remove all the stopped containers)

[docker-interview-questions/](https://www.edureka.co/blog/interview-questions/docker-interview-questions/)

----
### Q. How to configure CI/CD process?
- [build-ci-cd-pipeline-in-azure-devops](https://www.lambdatest.com/blog/build-ci-cd-pipeline-in-azure-devops/)
- [azure-devops-pipeline-tutorial](https://medium.com/abn-amro-developer/azure-devops-pipeline-tutorial-part-1-ci-pipeline-fundamentals-41e590ff1d80)

----
### Q. how to avoid sql injection?
#### Option 1: Use of **Prepared Statements** (with Parameterized Queries)
>Prepared statements ensure that an attacker is not able to change the intent of a query,  even if SQL commands are inserted by an attacker.

- Hibernate Query Language (HQL) Prepared Statement (Named Parameters) Examples:

>First is an unsafe HQL Statement

`Query unsafeHQLQuery = session.createQuery("from Inventory where productID='"+userSuppliedParameter+"'");`

> Here is a safe version of the same query using named parameters

`Query safeHQLQuery = session.createQuery("from Inventory where productID=:productid");
 safeHQLQuery.setParameter("productid", userSuppliedParameter);`

####  Option 2: Use of Properly Constructed Stored Procedures 
> The difference between prepared statements and stored procedures is that the SQL code for a stored procedure
> is defined and stored in the database itself, and then called from the application. 

> Both of these techniques have the same effectiveness in preventing SQL injection so your organization should 
> choose which approach makes the most sense for you.

``` java
// This should REALLY be validated
String custname = request.getParameter("customerName");
try {
CallableStatement cs = connection.prepareCall("{call sp_getAccountBalance(?)}");
cs.setString(1, custname);
ResultSet results = cs.executeQuery();
// … result set handling
} catch (SQLException se) {
// … logging and error handling
}
```
####  Option 3: Allow-list Input Validation
[Input_Validation_Cheat_Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Input_Validation_Cheat_Sheet.html)

####  Option 4: Escaping All User Supplied Input
> This technique works like this. Each DBMS supports one or more character escaping schemes specific
> to certain kinds of queries. 

>If you then escape all user supplied input using the proper escaping scheme for the database you are using, 
> the DBMS will not confuse that input with SQL code written by the developer, thus avoiding any possible SQL injection vulnerabilities.

##### Escaping Dynamic Queries
- To use an ESAPI database codec is pretty simple. An Oracle example looks something like:

`ESAPI.encoder().encodeForSQL( new OracleCodec(), queryparam );`

- it would now be safe from SQL injection, regardless of the input supplied.

```
Codec ORACLE_CODEC = new OracleCodec();
 String query = "SELECT user_id FROM user_data WHERE user_name = '"
ESAPI.encoder().encodeForSQL( ORACLE_CODEC, req.getParameter("userID"))
"' and user_password = '"
ESAPI.encoder().encodeForSQL( ORACLE_CODEC, req.getParameter("pwd")) +"'";
```

[SQL_Injection_Prevention_Cheat_Sheet](https://cheatsheetseries.owasp.org/cheatsheets/SQL_Injection_Prevention_Cheat_Sheet.html)
----
### Q. what is functional interface?
[functional-interfaces-java](https://www.geeksforgeeks.org/functional-interfaces-java/?ref=lbp)
----
### Q. why serialize a object? How to serialize and deserialize object? 
### Q. explain Serialisation, UUID and its concepts?

- You can think of serialization as the process of converting an **object instance into a sequence of bytes** (which may be binary or not depending on the implementation).
- It is very useful when you want to transmit one object data across the network, for instance **from one JVM to another.**
- In Java, the serialization mechanism is built into the platform, but you need to **implement the Serializable interface** to make an object serializable.
- You can also prevent some data in your object from being serialized by marking the attribute as **transient**.

#### Real World Example:
> ATM: When the account holder tries to withdraw money from the server through ATM,
> the account holder information like withdrawal details will be serialized and sent
> to the server where the details are deserialized and used to perform operations.


#### SerialVersionUID
> The Serialization runtime associates a version number with each Serializable class called a SerialVersionUID, 
> which is used during Deserialization to verify that sender and receiver of a serialized object have loaded classes 
> for that object which are compatible with respect to serialization.

> If the receiver has loaded a class for the object that has different UID than that of corresponding sender’s class,
> the Deserialization will result in an **InvalidClassException**.

#### This will answer a few frequent questions:

- How not to serialize any field in the class.
> Ans: use transient keyword

- When child class is serialized does parent class get serialized?
> Ans: No, If a parent is not extending the Serializable interface parents field don't get serialized.

- When a parent is serialized does child class get serialized?
> Ans: Yes, by default child class also gets serialized.

- How to avoid child class from getting serialized?
> Ans:
> a. Override writeObject and readObject method and throw NotSerializableException. 
> b. also you can mark all fields transient in child class.

- What are the class or class members will not be deserialized?

> Some system-level classes such as Thread, OutputStream, and its subclasses, and Socket are not serializable.

>In case of static Variables:- A variable defined with static keyword is not serialized during serialization process. 

>This variable will be loaded with current value defined in the class during deserialization.

[java-serialization](https://www.baeldung.com/java-serialization)

[serialization-in-java](https://www.geeksforgeeks.org/serialization-in-java/)

----
### Q. what is default spring bean status?
>The default scope for the bean is a singleton(single object instance per Spring IoC container), like the example below, 
> in which we haven't explicitly given a scope. programs.Singleton means that the Spring container 
> creates only one instance of the bean, and cached in memory, 
> and all the requests for that bean will return a shared reference to the same bean.
```java
// Java program to illustrate a bean
// created in the spring framework
package bean;

public class HelloWorld {
public String name;

	// Create a setter method to
	// set the value passed by user
	public void setName(String name)
	{
		this.name = name;
	}

	// Create a getter method so that
	// the user can get the set value
	public String getName()
	{
		return name;
	}
}
```
#### we can change scope by
```java
@Component
@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE)
public class PrototypeBean{
}
```

> As you can note here, even though we have declared bean as prototype(single bean definition to any number of object instances),
> still it is behaving like a singleton bean only.

```java
@Configuration
public class AppConfig {

    @Bean
    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)
    public PrototypeBean prototypeBean() {
        return new PrototypeBean();
    }

    @Bean
    public SingletonBean singletonBean() {
        return new SingletonBean();
    }
}
```
-  one way to solve this is: use @Lookup
```java
@Component
public class SingletonLookupBean {

    @Lookup
    public PrototypeBean getPrototypeBean() {
        return null;
    }
}
```
##### You can use method injection to solve this problem.Simply use @Lookup method, it will return new instance each time.

- ObjectFactory Interface
> Spring provides the ObjectFactory<T> interface to produce on demand objects of the given type:
```java
public class SingletonObjectFactoryBean {

    @Autowired
    private ObjectFactory<PrototypeBean> prototypeBeanObjectFactory;

    public PrototypeBean getPrototypeInstance() {
        return prototypeBeanObjectFactory.getObject();
    }
}
```

- Using java.util.Function
>Another option is to create the prototype bean instances at runtime,
> which also allows us to add parameters to the instances
```java
public class SingletonFunctionBean {

    @Autowired
    private Function<String, PrototypeBean> beanFactory;
    
    public PrototypeBean getPrototypeInstance(String name) {
        PrototypeBean bean = beanFactory.apply(name);
        return bean;
    }

}
```

#### Finally, we have to define the factory bean, prototype and singleton beans in our configuration:
```java
@Configuration
    public class AppConfig {
    @Bean
    public Function<String, PrototypeBean> beanFactory() {
    return name -> prototypeBeanWithParam(name);
    }

    @Bean
    @Scope(value = "prototype")
    public PrototypeBean prototypeBeanWithParam(String name) {
       return new PrototypeBean(name);
    }
    
    @Bean
    public SingletonFunctionBean singletonFunctionBean() {
        return new SingletonFunctionBean();
    }
    //...
}
```

##### We should use the prototype scope for all beans that are stateful and the singleton scope should be used for stateless beans.
----
### Q. what is states of hibernate attribute?
#### transient 
− A new instance of a persistent class, which is not associated with a Session and has no representation in the database and no identifier value is considered transient by Hibernate.

#### persistent 
− You can make a transient instance persistent by associating it with a Session. A persistent instance has a representation in the database, an identifier value and is associated with a Session.

#### detached 
- Once we close the Hibernate Session, the persistent instance will become a detached instance.

  ![TPD](https://user-images.githubusercontent.com/16031518/201423185-48f430bc-68a1-4d60-8f7d-0fe5b585deeb.JPEG)

----
### Q. Why concurrent HashMap used?
#### Hashtable vs concurrent hashmap?
#### Can two threads update in concurrent HashMap?

>	Yes, Thread safety is ensured by having separate locks for separate buckets,
> resulting in better performance. Performance is further improved by providing
> read access concurrently without any blocking.

[concurrent-hashmap-in-java](https://www.geeksforgeeks.org/concurrenthashmap-in-java/?ref=lbp)

[difference-between-concurrent-hashmap-hashtable-and-synchronized-map-in-java/](https://www.geeksforgeeks.org/difference-between-concurrenthashmap-hashtable-and-synchronized-map-in-java/)

[why-concurrent-hashmap-does-not-allow.html](http://javainterviewquestionswithanswer.blogspot.com/2016/12/why-concurrenthashmap-does-not-allow.html)

### Q. Sort hashmap on basis of value.?

[SortByValue](https://github.com/emranxec/KeepLearning/blob/main/JavaEight/src/programs/SortByValue.java)

----
### Q.  LinkedHashmap internal works?

| BEFORE | KEY | VALUE | AFTER |
|--------|-----|-------|-------|
```java
public class LinkedHashMap<K,V> extends
HashMap<K,V> implements Map<K,V>{

static class Entry<K,V>
extends HashMap.Node<K,V> {
Entry<K,V> before, after;
Entry(int hash, K key, V value, Node<K,V> next) {
super(hash, key, value, next);
}
}

/**
* The head (eldest) of the doubly linked list.
  */
  transient LinkedHashMap.Entry<K,V> head;

/**
* The tail (youngest) of the doubly linked list.
  */
  transient LinkedHashMap.Entry<K,V> tail;
  .....
  }
```
[how-linkedhashmap-works-internally-in-java](https://medium.com/@greekykhs/how-linkedhashmap-works-internally-in-java-409846a4f08)

----
### Q.  What enhancements were made to ConcurrentHashMap in Java 8?

1. putIfAbsent (The entire method invocation is performed atomically)
2. compute (The entire method invocation is performed atomically)
3. computeIfAbsent (The entire method invocation is performed atomically)
4. computeIfPresent (The entire method invocation is performed atomically)
5. search (key, value)
6. reduce (key, value)
7. forEach
----

### Q. what is weak hashmap?
> WeakHashMap is an implementation of the Map interface. WeakHashMap is almost same as HashMap except in case 
> of WeakHashMap, if object is specified as key doesn’t contain any references- **it is eligible for garbage collection** 
> even though it is associated with WeakHashMap. i.e **Garbage Collector dominates over WeakHashMap.**

#### there is no clone() method in the WeakHashMap class.

#### Strong, Soft, and Weak References
- Strong References (not eligible for GC)
- Soft References (won't be garbage collected until the JVM absolutely needs memory)
- Weak References (garbage collected eagerly)

[Hashmap-vs-weakhashmap-java](https://www.geeksforgeeks.org/hashmap-vs-weakhashmap-java/)

----
### Q. how you validate the request param and path param Done in spring?
```xml
<dependency>
    <groupId>org.hibernate.validator</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>6.0.10.Final</version>
</dependency>
```
#### @Validated

```java
@RestController
@RequestMapping("/")
@Validated
public class Controller {
// ...

    @GetMapping("/name-for-day")
    public String getNameOfDayByNumber(@RequestParam @Min(1) @Max(7) Integer dayOfWeek) {
        // ...
    }
    @GetMapping("/valid-name/{name}")
    public void createUsername(@PathVariable("name") @NotBlank @Size(max = 10) String username) {
        // ...
    }
}
```
>We can change the default message by adding a custom one:
`@Max(value = 1, message = “day number has to be less than or equal to 7”)`

[spring-validate-requestparam-pathvariable](https://www.baeldung.com/spring-validate-requestparam-pathvariable)

----
### Q. what is reflaction API? (java.lang.reflect)

> Reflection is an API that is used to **examine or modify the behavior** of methods, classes, 
> and interfaces at **runtime**.

![javalang](https://user-images.githubusercontent.com/16031518/197360863-da2c22f9-8b23-4077-bbc3-5936df723405.jpg)

#### methods
- getClass()
- getConstructors()
- getMethods()

#### We can invoke a method through reflection if we know its name and parameter types. We use two methods for this purpose as described below before moving ahead as follows:
- Class.getDeclaredMethod(name, parametertype)
- Method.invoke(Object, parameter)
- Class.getDeclaredField(FieldName)
- Field.setAccessible(true)

> **Note:** Through reflection, we can access the private variables and methods of a class with the help of its class object and invoke the method by 
> using the object as discussed above. We use below two methods for this purpose.

[reflection-in-java/](https://www.geeksforgeeks.org/reflection-in-java/)

----
### Q. at what time/place rollback gets called?
> In Spring Boot, when @Transactional annotation is used, Spring Boot implicitly creates a [proxy](https://github.com/emranxec/KeepLearning/blob/main/README.md#proxy-pattern)
> that will be creating a connection to the database. A transaction will be started and commit 
> after the code has been executed errorless. Otherwise, it will roll back the changes if an 
> exception occurred.

```java
class someClass{
@Transactional
public void createProduct() {  
System.out.println("------ createProduct ------");
Product prod = new Product();
prod.setDescription("This is an example with runtime exception and transactional annotation.");
prod.setPrice(10);
prod.setTitle("Second Product");
productRepository.save(prod);
System.out.println("Second Product inserted.");
throw new RuntimeException();
}
}
```

###### Take note, Spring only rolled back on unchecked exceptions by default. To roll back checked exception, we need to specify the rollbackFor

[spring-transactional-rollback-handling](https://medium.com/geekculture/spring-transactional-rollback-handling-741fcad043c6)
----
### Q. what are different types of class loader?
- A Java Classloader is of three types:
1. BootStrap ClassLoader (JDK/JRE/LIB)
2. Extension ClassLoader (JDK/JRE/LIB/EXT)
3. System ClassLoader (Application Classpath)

- Methods of Java.lang.ClassLoader
1. loadClass(String name, boolean resolve):
2. defineClass()
3. findClass(String name)
4. findLoadedClass(String name)
5. Class.forName(String name, boolean initialize, ClassLoader loader)

- [classloader-in-java/](https://www.geeksforgeeks.org/classloader-in-java/)

----
### Q. How to convert monolithic application to microservices?
1. Identify logical components.
2. Flatten and refactor components.
3. Identify component dependencies.
4. Identify component groups.
5. Create an API for remote user interface.
6. Migrate component groups to macroservices (move component groups to separate projects and make separate deployments).
7. Migrate macroservices to microservices.
8. Repeat steps 6-7 until complete.

[8-steps-for-migrating-existing-applications-to-microservices](https://insights.sei.cmu.edu/blog/8-steps-for-migrating-existing-applications-to-microservices/)

----
### Q. Garbage collectors? what are diff types of garbage collector? Different method of garbage collector?

> Garbage collection in Java is the process by which Java programs perform **automatic memory management.**
 The main objective of Garbage Collector is to **free heap memory** by destroying unreachable objects.
> The garbage collector is the best example of the **Daemon thread** as it is always running in the background.

###### NOTE: GC works in two simple steps, known as Mark and Sweep.

#### Advantages:
1. No manual memory allocation/deallocation handling because unused memory space is automatically handled by GC 
2. No overhead of handling Dangling Pointer 
3. Automatic Memory Leak management

#### JVM has five types of GC implementations:
- Serial Garbage Collector 
> freezes all application threads when it runs.
- Parallel Garbage Collector
> it uses multiple threads for managing heap space, but it also freezes other application threads while performing GC.
- ~~CMS Garbage Collector~~ (deprecated)
> The Concurrent Mark Sweep (CMS) implementation uses multiple garbage collector threads for garbage collection
- G1 Garbage Collector 
> designed for applications running on multiprocessor machines with large memory space.

> G1 collector will replace the CMS collector, since it's more performance efficient.

- Z Garbage Collector
> ZGC (Z Garbage Collector) is a scalable low-latency garbage collector.

> that debuted in Java 11 as an experimental option for Linux.

> ZGC performs all expensive work concurrently, without stopping the execution of application threads for more than 10 ms,

> It also handles heaps ranging from 8MB to 16TB in size.

[jvm-garbage-collectors](https://www.baeldung.com/jvm-garbage-collectors)

#### Types of Activities in Java Garbage Collection
1. Minor or incremental Garbage Collection
2. Major or Full Garbage Collection

#### There are generally four ways to make an object eligible for garbage collection.
1. Nullifying the reference variable 
2. Re-assigning the reference variable 
3. An object created inside the method 
4. Island of Isolation

#### Ways for requesting JVM to run Garbage Collector
1. Using System.gc() 
2. Using Runtime.getRuntime().gc()

#### Finalization
- Just before destroying an object, Garbage Collector calls finalize() method on the object to perform cleanup activities.
- The finalize() method is never invoked more than once for any object.

[garbage-collection-java](https://www.geeksforgeeks.org/garbage-collection-java/)

----
### Q. jdbc versus hibernate?
[difference-between-jdbc-and-hibernate-in-java](https://www.geeksforgeeks.org/difference-between-jdbc-and-hibernate-in-java/)

----
### Q. explain @mappedBy?

> In JPA or Hibernate, entity associations are directional, either unidirectional or
> bidirectional. Always mappedBy attribute is used in **bidirectional association** to link
> with other side of entity.


```java

@Entity
public class Student implements Serializable {

    @Id
    private int id;

    private String fname;

    //bi-directional many-to-one association to Branch
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name="BRANCH_ID")
    private Branch branch;

       ....
}
@Entity
public class Branch implements Serializable {
	@Id
	@Column(name="BRANCH_ID")
	private int branchId;
    
	//bi-directional many-to-one association to Student
	@OneToMany(mappedBy="branch", cascade={CascadeType.ALL},
			orphanRemoval = true)
	private List<Student> students;

        .... omitted setters getters etc
}
}

```
#### [What is Cascade in hibernate?](https://github.com/emranxec/KeepLearning/blob/main/README.md#q-what-is-cascade-in-hibernate)

>mappedBy attribute indicates that which entity owns the relationship
> (in this example, Student) and what reference is used for non-owning entity
> within owner entity (in this example, branch is the reference name used in 
> Student entity to map Branch entity).

[difference-between-joincolumn-and-mappedby/](https://javabydeveloper.com/difference-between-joincolumn-and-mappedby/)


----
### Q. explain hibernate caching? how to Configure ehcache?
> Hibernate is an ORM (Object-relational model) tool that is widely used by developers 
> worldwide. It has many in-built features available that make the developer’s life simple.
> One of them is a **caching mechanism**.

#### There are mainly two types of caching:
- First level cache (default,can not disable,until Session is open)
> Long-lived sessions with several large objects consume more memory 
> and may cause out of memory errors.
- Second-level cache (default disabled,)

#####  Some useful methods:
- Session.evict(): to remove the cached/stored entity. 
- refresh(): method to refresh the cache. 
- clear(): method to remove all the entities from the cache.

###### Cache is stored in the RAM only. And because of that, it gives faster access to data rather than databases.

#### Ehcache

- Maven dependency:
```xml
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-ehcache</artifactId>
    <version>5.2.2.Final</version>
</dependency>
```

##### Enabling Second-Level Caching
```lombok.config
hibernate.cache.use_second_level_cache=true
hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.EhCacheRegionFactory
```

- persistance.xml
```xml
<properties>
    ...
    <property name="hibernate.cache.use_second_level_cache" value="true"/>
    <property name="hibernate.cache.region.factory_class" 
      value="org.hibernate.cache.ehcache.EhCacheRegionFactory"/>
    ...
</properties>
```

##### Making an Entity Cacheable
```java
@Entity
@Cacheable
@org.hibernate.annotations.Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class Foo {
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "ID")
private long id;

    @Column(name = "NAME")
    private String name;
    
    // getters and setters
}
```

##### Cache Concurrency Strategy
- READ_ONLY
> Used only for entities that never change. eg. static data
- NONSTRICT_READ_WRITE
> Cache is updated after the transaction that changed the affected data has been committed
- READ_WRITE
> This strategy guarantees strong consistency, which it achieves by using ‘soft' locks.
- TRANSACTIONAL 
>  Cache changes are done in distributed XA transactions.

###### Collections aren't cached by default, and we need to explicitly mark them as cacheable.

#### Query Cache
```lombok.config
hibernate.cache.use_query_cache=true
```
```
entityManager.createQuery("select f from Foo f")
.setHint("org.hibernate.cacheable", true)
.getResultList();
```
[hibernate-second-level-cache](https://www.baeldung.com/hibernate-second-level-cache)

----
### Q. explain Bean lifecycle?

[bean-scopes-and-lifecycle-spring](https://www.topcoder.com/thrive/articles/bean-scopes-and-lifecycle-spring)

----
### Q. MQS?
>A message queue is mostly meant for asynchronous things where you dont have to wait for the response. 

>You could block the caller until a response is sought, but thats typically what an MQ is not meant for. 

>You would use it only in cases where a user is NOT waiting for an output. A webservice is the opposite. 

> You get a request, process it and return it back in a  finite time. 

>The caller will mostly block until a response is received.

>You can send String, Objects , Maps, Byte Arrays to an MQ.

>There are no constraints regarding the placement of the MQs. 

>Just like webservices they can be anywhere and you can write and read from the Queue.

##### Benefits of Message Queues
- Better performance
- Increased Reliability
- Granular Scalability
- Simplified Decoupling

##### Types of message queues
- Point-to-Point
- Publish/Subscribe

![MQ](https://user-images.githubusercontent.com/16031518/197407771-da28b2e5-1d21-47ca-afdf-644443a27134.png)

###### Message Broker: 
> Software that allows applications, systems, and services to communicate and exchange data. 

>A Message Broker can perform a range of operations on data like validation, transformation, aggregation, decomposition, rerouting, storage, and guaranteed delivery. Some prominent examples of Message Brokers include RabbitMQ, Apache Kafka, Redis, Amazon SQS, IBM MQ, and IronMQ.

###### Message Queue: A Simple Use Case of Sending Emails

![MQ1](https://user-images.githubusercontent.com/16031518/197408145-861f11bf-3bf7-4069-a948-f69e4cb8b636.png)

###### Synchronous vs. Asynchronous

1. Synchronous protocol: like HTTP (REST, SOAP or any other RPC)

2. Asynchronous protocol: message queue protocols like AMQP(RabbitMQ), Apache Kafka, STOMP, MQTT, etc.

##### Message Brokers
- RabbitMQ 
- Apache Kafka 
- Apache ActiveMQ 
- Redis
- Amazon MQ
- Azure Event Hubs 
- Azure Service Bus

[introduction-to-message-queuing](https://medium.com/tech-sauce/introduction-to-message-queuing-4a7ab8968b59)

----
### Q. explain Maven in detail? explain Pom.xml in detail?

#### What is Maven?
>Maven is a powerful project management tool that is based on POM (project object model). 

> It is used for projects build, dependency and documentation.

##### What maven does?
- We can easily build a project using maven.
- We can add jars and other dependencies of the project easily using the help of maven.
- Maven provides project information (log document, dependency list, unit test reports etc.)
- Maven is very helpful for a project while updating central repository of JARs and other dependencies.
- we can build any number of projects into output types like the JAR, WAR etc without doing any scripting.
- Using maven we can easily integrate our project with source control system (such as Subversion or Git).

##### Core Concepts of Maven?
- POM Files
- Dependencies and Repositories
- Build Life Cycles, Phases and Goals
- Build Profiles
- Build Plugins

##### Maven has three types of repository
1. Local repository 
2. Central repository 
3. Remote repository
##### Maven - POM
> POM stands for Project Object Model. It is fundamental unit of work in Maven. It is an XML file that resides
> in the base directory of the project as pom.xml. 

>It should be noted that there should be a single POM file for each project.

###### Super POM
> The Super POM is Maven’s default POM. All POMs inherit from a parent or default
----
### Q. Why to overide run in springApplication?

[run-method-on-application-startup-in-spring-boot
](https://medium.com/@cancerian0684/run-method-on-application-startup-in-spring-boot-37aa5e82c948)

----
### Q. try with resources vs try with finally?

>The main problem with this approach(try with finally) is that if you get an error while in the try part of your open InputStream,
> and you get an error rather than opening the stream like you get an error because you tried to run .readLines(), 
> and because of the same reason the code in your finally part, .close(), fails and throws an Exception, 
> you will not be able to view the first exception.

- Solution
> When Java 7 introduced try(withResources) that solves this problem. Your resource needs to implement an AutoClosable interface, 
> and then the latter exceptions are suppressed and the first one is thrown.

```
// try-catch-finally
Scanner scanner = null;
try {
    scanner = new Scanner(new File("test.txt"));
    while (scanner.hasNext()) {
        System.out.println(scanner.nextLine());
    }
} catch (FileNotFoundException e) {
    e.printStackTrace();
} finally {
    if (scanner != null) {
        scanner.close();
    }
}

// try-with-resources - try(Resources)
try (Scanner scanner = new Scanner(new File("test.txt"))) {
    while (scanner.hasNext()) {
        System.out.println(scanner.nextLine());
    }
} catch (FileNotFoundException e) {
    e.printStackTrace();
}
```
[prefer-try-with-resources-to-try-catch-finally](https://recepinanc.medium.com/til-18-prefer-try-with-resources-to-try-catch-finally-afc8c0dc9c05)

----
### Q. Function vs bifunction?

##### Function

It represents a function which takes in one argument and produces a result.The interface contains four methods:
- The apply() method
- The andThen() method
- compose()
- identity()

This functional interface which takes in 2 parameters namely:-

- T: denotes the type of the input argument 
- R: denotes the return type of the function

##### BiFunction 
is a functional interface, which accepts two arguments and returns a result. The interface contains two methods:
- The apply() method
- The andThen() method

This functional interface which takes in 3 parameters namely:-

- T: denotes the type of the input argument
- U: denotes the type of the second argument to the function
- R: denotes the return type of the function


```java
Syntax
@FunctionalInterface
public interface Function<T, R> {
}

@FunctionalInterface
public interface BiFunction<T, U, R>{
}

import java.util.function.BiFunction;
        import java.util.function.Function;

public class SampleFunctionBiFunctionTest {
    public static void main(String[] args) {
        Function<Integer, Integer> printNumber = a -> a*10;
        System.out.println("The number is: "+ printNumber.apply(10));

        BiFunction<Integer, Integer, Integer> add = (a, b) -> a+b;
        System.out.println("The addition of two numbers are: "+ add.apply(3,2));
    }
}
```

[function-interface-in-java](https://www.geeksforgeeks.org/function-interface-in-java-with-examples/)
[bifunction-interface-methods-apply-and-addthen](https://www.geeksforgeeks.org/java-bifunction-interface-methods-apply-and-addthen/)

----
### Q. Mapping vs flat mapping?
##### map() 
can be used where we have to map the elements of a particular collection to a certain function, and then we need to return the stream which contains the updated results.

###### Example: 
Multiplying All the elements of the list by 3 and returning the updated list.

##### flatMap() 
can be used where we have to flatten or transform out the string, as we cannot flatten our string using map().

###### Example: 
Getting the 1st Character of all the String present in a List of Strings and returning the result in form of a stream.
```java 
class GFG {

    public static void main(String[] args)
    {
        ArrayList<String> fruit = new ArrayList<>();
        fruit.add("Apple");
        fruit.add("mango");
        fruit.add("pineapple");
        fruit.add("kiwi");

        List<List<Integer> > number = new ArrayList<>();
        // adding the elements to number arraylist
        number.add(Arrays.asList(1, 2));
        number.add(Arrays.asList(3, 4));
        number.add(Arrays.asList(5, 6));
        number.add(Arrays.asList(7, 8));
 
        List list = fruit.stream()
                        .map(s -> s.length())
                        .collect(Collectors.toList());

        // using flatmap() to flatten this list
        List<Integer> flatList
            = number.stream()
                  .flatMap(list -> list.stream())
                  .collect(Collectors.toList());
    }
}
```

[difference-between-map-and-flatmap-in-java](https://www.geeksforgeeks.org/difference-between-map-and-flatmap-in-java-stream/?ref=lbp)

----
### Q. what are Design principles?
#### SOLID Design Principles
> SOLID principles are class-level, object-oriented design concepts that, in conjunction with an extensive test suite, 
> help you avoid code rot.

##### SOLID design is an acronym for the following five principles:
- Single Responsibility Principle 
> Everything in the class should be related to that **single purpose.** 
> It does not mean that your classes should only contain one method or property.

>If you have multiple responsibilities combined into one class, it might be difficult to change one part without breaking others.

- Open-Closed Principle 
> This principle is described as follows: software entities (classes, modules, functions, etc.) 
> should be **open for extension, but closed for modification.**
 
>This means that the system must be flexible, able to work in changing conditions without changing the source code.

- Liskov Substitution Principle 
> Subclasses **must override the methods of the base class** so that 
> the functionality is not broken from the point of view of the client.
```java
public class OrderStockAndPackValidator extends OrderStockValidator {
 @Override
    public boolean isValid(Order order) {
}
}
```
- Interface Segregation Principle 

>client should **not be forced to implement methods** that they will not use.

> Consider this example: Alex, a developer, has created a "report" interface and added two methods: 
> generateExcel() and generatedPdf(). 
> Now a client wants to use this interface, but only intends to use reports in PDF format, not in Excel. 
> Will this functionality satisfy this client?

- Dependency Inversion Principle
> Higher-level modules do not depend on lower-level modules. Abstractions should not depend on details. **Details should depend on abstractions**. 
> Software needs to be designed so that the various modules are self-contained 
> and connected to each other through abstraction.
```java
public interface MailSender {
void sendConfirmationEmail(Order order);
}

public interface OrderRepository {
boolean save(Order order);
}

public class ConfirmationEmailSender implements MailSender {
    @Override
    public void sendConfirmationEmail(Order order) {
    }
}

public class MySQLOrderRepository implements OrderRepository {
    @Override
    public boolean save(Order order) {
    }
}
public class OrderProcessor {

    private MailSender mailSender;
    private OrderRepository repository;
}
```
[Solid-five-basic-principles-of-class-design-in-java](https://codegym.cc/groups/posts/232-solid-five-basic-principles-of-class-design-in-java)

#### Other Principles

- DRY Principles
> The DRY principle stands for the **Don't Repeat Yourself** principle.
> Within a system, each piece of logic should have a single unambiguous representation.
- KISS Principle
> It is another designing principle that stands for **Keep It Simple and Stupid** Principle.
> This principle is just a reminder to keep our code readable and simple for humans. 
> If several use cases are handled by the method, we need to split them into smaller functions.
- Composition Over Inheritance Principle
> The principle states that we should have to **implement interfaces rather than extending the classes.** 
> We implement the inheritance when
> The class need to implement all the functionalities
> The child class can be used as a substitute for our parent class.
----
### Q. explain StackOverFlow vs OOM?
> Whenever you run a java program or java application, operating system allocates some memory to JVM. 

> JVM divides this memory into two parts. One is Stack and another one is Heap. 

> Stack is used for execution of methods and heap is used to store the objects. 

> When the Stack becomes full, JVM throws java.lang.StackOverflowError.(check for thread dumps)

> when the heap becomes full, JVM throws java.lang.OutOfMemoryError. (check for heap dumps)

##### StackOverflowError
- A stack is used for the execution of methods. For every method call, one block is created in the stack memory
- The data related to the method like parameters, local variables or references to objects are stored in this block.
- When the method finishes its execution, this block is removed from the stack along with data stored in it.
- Whenever we call a method, it must finish its execution and leave the stack memory.
- If methods are staying in the stack then the stack will be full and JVM will **throw java.lang.StackOverflowError.**

```java 
    public class StackOverflowErrorExample
    {
    private static void addItself(int i)
    {
    addItself(i+i);   //calling itself with no terminating condition
    }
    
        public static void main(String[] args) 
        {
            addItself(10);
        }
    }
```
##### OutOfMemoryError
- The objects we created in Java are stored in the heap memory. When the objects are no more required, they must be removed from the memory.
- The garbage collector removes the unwanted objects from the heap memory.
- If our objects have live references, the garbage collector doesn’t remove them. It removes only those objects which don’t have live references.
- If there is no space left for new objects in the heap memory then JVM will **throw java.lang.OutOfMemoryError.**

```java 
    public class OutOfMemoryErrorExample
    {   
    public static void main(String[] args)
    {   
    //Creating new objects in never ending loop
    
            for (int i = 1; i > 0; i++)
            {
                new Object();
            }
        }
    }
```
----
### Q. explain Microservice framework Netflix?
>
----
### Q. difference between @Primary & @Qualifier?

#### @Primary
> When more than one bean qualifies for the dependency to be autowired, 
> @Primary specifies which bean should be given preference.
> Among the eligible beans, there should be exactly one primary bean.

#### @Qualifier
> When more than one bean meets the requirements for the dependency, we may use a qualifier annotation to explicitly 
> define the bean name and let spring know which dependency should be really called for.
```java
@Service("Alpha")
public class AlphaUniversity implements University {

    @Override
    public String display() {

        return "This is a message from Alpha University";
    }
}
@Service("Beta")
@Primary
public class BetaUniversity implements University {

    @Override
    public String display() {

        return "This is a message from Beta University";
    }
}
@RestController
public class UniversityController {

    @Autowired
    @Qualifier("Alpha")
    private University AlphaUniversity;

    @GetMapping ("/university")
    public String getUniversity() {

        return AlphaUniversity.display();
    }
}
```
- Both annotations can be used together
- @Qualifier has higher priority than @Primary annotation

##### if we dont use both primary and qualifier and have multiple beans instances?
> When we run the integration test, an org.springframework.beans.factory.NoUniqueBeanDefinitionException will be thrown.

> This will happen because the application context will find two bean definitions of type University, 
> and won't know which bean should resolve the dependency.

----
### Q. Controller vs rest controlled?

[difference-between-controller-and-restcontroller](https://www.geeksforgeeks.org/difference-between-controller-and-restcontroller-annotation-in-spring/?ref=lbp)

----
### Q. explain Hibernate inheritance?
> Entity inheritance means that we can use polymorphic queries for retrieving
> all the subclass entities when querying for a superclass.

#### Hibernate Single Table Strategy (strategy=InheritanceType.SINGLE_TABLE)

- Simplest to implement.
- Only one table to deal with.
- Tables are not normalized.

> In case of single table strategy, there is a single table created per inheritance hierachy.
```java
@Entity
@Table(name="VEHICLE")
@Inheritance(strategy=InheritanceType.SINGLE_TABLE) //Least normalisation strategy
public class Vehicle{}

@Entity
@DiscriminatorValue("Bike")
public class TwoWheeler extends Vehicle{}


@Entity
@DiscriminatorValue("Car")
public class FourWheeler extends Vehicle{}
```
#### Hibernate Table Per Class Strategy (strategy=InheritanceType.TABLE_PER_CLASS)
- You can define NOT NULL constraints on the table.
- Tables are not normalized.
- Select statements require more time to execute as **UNION operation** is applied.

>In case of table per class strategy, there are no. of tables created equivalent to exact no.
> of concrete entities defined in the inheritance hierarchy.

```java
@Entity
@Table(name="VEHICLE")
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS) //slightly more normalized
public class Vehicle{}

@Entity
@Table(name="TWO_WHEELER")
public class TwoWheeler extends Vehicle{}

@Entity
@Table(name="FOUR_WHEELER")
public class FourWheeler extends Vehicle{}

```
#### Hibernate Joined Table Strategy (strategy=InheritanceType.JOINED)
- Tables are normalized.
- You can define NOT NULL constraints.
- Low performance as it runs OUTER JOIN as well as INNER JOIN in select statements.

> All the entries in the DB will be created in one table that is corresponding table of parent entity and the tables 
> corresponding to the child entities will have reference to it.

```JAVA
@Entity
@Table(name="VEHICLE")
@Inheritance(strategy=InheritanceType.JOINED)//Highly normalized
public class Vehicle {}

@Entity
@Table(name="TWO_WHEELER")
@PrimaryKeyJoinColumn(name="ID")
public class TwoWheeler extends Vehicle{}

@Entity
@Table(name="FOUR_WHEELER")
@PrimaryKeyJoinColumn(name="ID")
public class FourWheeler extends Vehicle{}
```

> @Inheritance - It is used to define the type of inheritance used in hibernate and it is defined in the parent class.

>@DiscriminatorValue - This annotation is used to specify the DType column name. Here we have defined it as Bike  
> in case of TwoWheeler.java and Car in case of FourWheeler.java

[implementing-inheritance-in-hibernate](https://www.dineshonjava.com/hibernate/implementing-inheritance-in-hibernate/)

----
### Q. Why microservices?

- Continuous delivery
> Each application resides in a separate container along with the environment it needs to run. Because of this, 
**each application can be edited in its container without the risk** of interfering with any other application.

> This means zero downtime for users, simplified troubleshooting, and no disruption even if a problem is identified.

- Maximize deployment velocity
> Each application run in their own containerized environment, **applications can be moved anywhere without altering the environment.** 
> If an application works in development, it will work for the customer. This speeds up time to market and increases product reliability.

- Faster innovation to adapt to changing market conditions
> Microservices can also **help you adapt more quickly to the changing market conditions**. Because microservices 
> allow applications to be updated and tested quickly, you can follow market trends and adapt your products faster.

- Enable developers
> Developers, architects, and operations people are driven by performance. **They want to address the technical and 
> business problems they see using the best tools available**. If you want to attract top talent – and keep the talent 
> you have – it’s important to keep up-to-date on current ideas in IT. That means being ready to start working with 
> a microservices architecture.

- Reduce costs
> **Change in one place affects other aspects**. This means a lot more work for developers and operations professionals
> to sort out the side effects of updates before they can make them. The more updates, the bigger the monolith grows, 
> and the more time and resources have to go into making future changes.
----
### Q. how to manage two different session factory Transaction?

- HibernateTransactionManager 
> manages transactions on top of a single Hibernate SessionFactory. If your application uses only
> a JDBC-compliant database to store data (that is, no ERP, JMS queue, file system, etc. is involved) 
> that you access using Hibernate, you can use a HibernateTransactionManager in your application.

```Xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx.xsd">

    <import resource="classpath:org/springbyexample/orm/hibernate3/shared-context.xml"/>

    <bean id="transactionManager" 
          class="org.springframework.orm.hibernate3.HibernateTransactionManager"
          p:sessionFactory-ref="sessionFactory" />

    <tx:annotation-driven/>
   
    <bean id="personDao" 
          class="org.springbyexample.orm.hibernate3.dao.PersonDaoImpl"
          p:sessionFactory-ref="sessionFactory" />

</beans>
```

- JTA transaction Manager 
> If however, you have business operations that can modify multiple data stores at the same time and you
> need to ensure data consistency across all the stores, you will need to use JTA transactions.
> JTA support is provided either by JavaEE containers like JBoss, WebLogic or WebSphere or third-party
> JTA providers like Atomikos or Bitronix.

<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
```Xml
    <bean name="simpleJtaTransactionManager" class="nl.futureedge.simple.jta.JtaTransactionManager">
        <property name="uniqueName" value="test"/>
        <property name="jtaTransactionStore">
            <bean class="nl.futureedge.simple.jta.store.jdbc.JdbcTransactionStore">
                <property name="create" value="true"/>
                <property name="url" value="jdbc:hsqldb:hsql://localhost:${test.database.port}/trans"/>
                <property name="user" value="sa"/>
                <property name="password" value=""/>
            </bean>
        </property>
    </bean>

    <!-- Spring transaction manager -->
    <bean name="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
        <property name="transactionManager" ref="simpleJtaTransactionManager" />
    </bean>
</beans>
```
----
### Q.  what are Different library for hibernate?
- hibernate3.jar (main jar)
- antlr-2.7.6.jar 
- common-collections-3.1.jar 
- dom4j-1.6.1 
- jta-1.1.jar 
- slf4j-api-1.6.1.jar 
- javassist-3.12.0.GA.jar 
- hibernate-jpa-2.0-api-1.0.0.Final.jar (for jpa)
----
### Q. What function is java 8 filter backend? (java.util.function.*)

##### Stream filter(Predicate predicate) 
> returns a stream consisting of the elements of this stream that match the given **predicate**.
`Stream<T> filter(Predicate<? super T> predicate)`
>This is an intermediate operation. These operations are always lazy i.e, executing an intermediate operation 
> such as filter() does not actually perform any filtering, but instead creates a new stream 
> that, when traversed, contains the elements of the initial stream that match the given predicate.


* //filter=predicate ->return boolean
* //reduce=BinaryOperator->data(terminal)
* //Map=function ->stream
* //foreach=consumer->data(terminal)

##### java 8 methods
- Stream
- filter(predicate)
```
public void removeFromCollection() {
List<Integer> collect1 = Stream.of(10, 20, 30, 40).collect(toList());
collect1.removeIf(integer -> integer > 15);
collect1.forEach(System.out::println);
}
```
- map(Function)
- count
- collect
- sorted -> natural order -> comparable interface -> compareTo
- sorted(comparator) ->customized order
- min(comparator) ,get
- max(comparator) ,get
- average(),isPresent
- foreach(consumer)
- toArray(Integer[]::new) {this is consutructor reference}
- distinct
- skip,range
- reduce (other options - count,max,sum,min,summeryStatistics)
- findFirst,ifPresent
- 
----
### Q. Where vs having in sql?

[having-vs-where-clause-in-sql](https://www.geeksforgeeks.org/having-vs-where-clause-in-sql/)

----
### Q. Why overloading? and Over loading concept?

##### Advantages of Method Overloading
- Method overloading improves the **Readability and reusability** of the program. 
- Method overloading **reduces the complexity** of the program. 
- Using method overloading, programmers can **perform a task efficiently and effectively**. 
- Using method overloading, it is possible to access **methods performing related functions with slightly different arguments and types**. 
- Objects of a class can also be initialized in different ways using the constructors.

----
### Q. is Synchronized block entire object?
> A synchronized block in Java is synchronized on some object. 
 
> All synchronized blocks synchronize on the same object can only have one thread executing inside them at a time. 

> All other threads attempting to enter the synchronized block are blocked until the thread inside the synchronized block exits the block.

[synchronization-in-java](https://www.geeksforgeeks.org/synchronization-in-java/?ref=lbp)

----
### Q. why Spring boot
> The Spring framework has been made significantly more user-friendly with the development of Spring Boot.

> manage frameworks and versions (All dependency management)

#### benefits include:
- **Reduces development time** and **increases the overall productivity** of the development team.
- Helps you **autoconfigure all components** for a production-grade Spring application.
- Makes it **easier for developers to create and test Java-based applications**
- **Avoids writing lots of boilerplate code**, annotations, and XML configuration.
- **Comes with embedded HTTP servers like Tomcat** or Jetty to test web applications.
- Allows admin support
- Adds many plugins that developers can use to work
-  Spring allows you to easily connect with database and queue services like Oracle, PostgreSQL, MySQL, MongoDB, Redis, Solr.

> Suppose your application want to interact with
> DB, if there are Spring Data libraries on class
> path then it automatically sets up connection to
> DB along with the Data Source class.


#### pom.xml
> REST API - Spring framework,spring MVC Framework, JSON binding framework

> Unit Tests - SPring test,mockito,Junit

#### web.xml
> If we needed spring MVC we need to configure dispatcher servlet

#### context.xml (Define Spring configuration)
> Component scan
> view resolver
> Data resource

#### NFR's (Non functional requirement)
> Logging
> Error Handling
> monitoring
----
### Q. How to configure profile in spring boot
#### Use @Profile on a Bean
> We use the @Profile annotation — we are mapping the bean to that particular profile;

##### Declare Profiles
```java
@Component
@Profile("dev")
public class DevDatasourceConfig{}
```

#####  Activating or Setting a Profile
> spring.profiles.active=dev

- To set profiles programmatically, we can also use the SpringApplication class:
> SpringApplication.setAdditionalProfiles("dev");

- Maven
```xml
<plugins>
    <plugin>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-maven-plugin</artifactId>
        <configuration>
            <profiles>
                <profile>dev</profile>
            </profiles>
        </configuration>
    </plugin>
    ...
</plugins>
```

[spring-profiles](https://www.baeldung.com/spring-profiles)

[spring-vs-spring-boot](https://www.interviewbit.com/blog/spring-vs-spring-boot/)
---- 
### Q. Git Rebase vs Git Merge: Which is Better?
##### Git Merge
> Git merge is one of the merging techniques in git, in which the logs of commits on branches are intact.

- Advantages:
> The logs are very exhaustive and can help in understanding the complete history of how and when each merge happened
> It is easy to find mistakes and resolve them.

- Disadvantages:
>Results in a clumsy log / history. Not very user-friendly

##### Git-Rebase
> Git Rebase is similar to git merge, but the logs are modified after merge in this technique.

- Advantages:
>The logs are linear. It’s easy to move through the project.

- Disadvantages:
> We cannot track, when and how the commits were merged on the target branch


##### we do git merge when we want our team to understand logs in a way where they can identify where each commit is coming from. We use Git Rebase when the logs of the repository will not be referred by anyone else.

---- 
### Q. What is difference between Primary key and Unique Key?

1. The main purpose of a Primary key is to uniquely identifies a given record in a Table, while the same is not true for Unique Key constraint.
2. A table can have one and only one Primary Key, while there could be multiple unique keys inside a single
   table.
3. Primary Key can not have Null values while Unique key column can contain a Null value
4. **Primary key creates the Clustered index**, but _unique key creates the Non clustered index_.

----
### Q. Why do we need indexing on database table columns?
> Indexing is a way of sorting a number of records on multiple fields. 
> Creating an index on a field in a table creates another data structure which holds the field value, 
> and pointer to the physical record it relates to. This index structure is then sorted, 
> allowing Binary Searches [Time Complexity O(log(n))] to be performed on it .

- Creating Index on database table column improves table query performance.
- It is a usual practice to create Index on Table Columns that are frequently used in where clause of query.
- they require additional space on Disc.

----
### Q. How would you fetch Employee with nth highest Age from Employee Table using SQL?
```roomsql
-- easy ways :
SELECT name, MAX(salary) AS salary 
FROM employee 
WHERE salary IN
(SELECT salary FROM employee MINUS SELECT MAX(salary) 
FROM employee); 
-- other ways :
SELECT *
FROM Employee E1
WHERE (N-1) = (SELECT COUNT(DISTINCT(E2.Age))
FROM Employee E2
WHERE E2.Age > E1.Age)
-- To find 2nd highest Age, the query would become
SELECT *
FROM Employee E1
WHERE (2-1) = (SELECT COUNT(DISTINCT(E2.Age))
FROM Employee E2
WHERE E2.Age > E1.Age)
--with Dence Rank
WITH T AS
(
SELECT *
   DENSE_RANK() OVER (ORDER BY Salary Desc) AS Rnk
FROM Employees
)
SELECT Name
FROM T
WHERE Rnk=2;
```
----
### Q. What is difference between Drop, Truncate and Delete commands in SQL?

- Delete is used to delete rows from a table with optional where clause, we need to commit or rollback after
calling this operation. This operation will cause all DELETE triggers to be fired on the table.
> DELETE FROM Employee WHERE age < 14;
- Truncate removes all rows from table, this operation can not be rolled back and no triggers are fired, thus it is
faster in performance as well.
> Truncate Table Employee;
- Drop command will remove a table from the schema, all data rows, indexes, privileges will be removed, no
triggers will be fired and no rollback.
> Drop Table Employee;
----
### Q. What are clustered and non-clustered indexes in database?

- Clustered Index
> Clustered index physically rearrange the data that users inserts in your tables. It is nothing but a dictionary
> type data where actual data remains. And thus the physical order of the rows is the same as the logical order
(indexed order). This type of index is often build over the **Primary Key of a table**
- Non-Clustered Index
> Non-Clustered Index contains pointers to the data that is stored in the data page. It is a kind of index backside
> of the book where you see only the reference of a kind of data.

> Clustered index usually provides faster data retrieval than the non-clustered index. Moreover clustered indexes
> provides faster access to the contiguous rows because those rows are present physically adjacent in the actual
> table

----
### Q. What are OneToOne, OneToMany and ManyToMany relationship mappings in database design?

- OneToOne
 > A Person has a PAN (Card) is a perfect example of One-To-One association.
```java
//Employee
@OneToOne(cascade = CascadeType.ALL)
@JoinColumn(name = "pan_id", referencedColumnName = "id")
private Pancard pancard;

//Pancard class
@OneToOne(mappedBy = "pancard")
private Employee employee;
```
- OneToMany
>  relationship between Employee and Department where a Department is associated with Collection of Employee(s)
```java
@Entity
public class Employee {
@Id private int id;
@ManyToOne
@JoinColumn(name="DEPT_ID")
private Department department;
// ...
}

@Entity
public class Department {
@Id private int id;
@OneToMany(mappedBy="department")
private Collection<Employee> employees;
// ...
}
```
- ManyToMany
> Each employee can work on multiple Project(s) and each Project can be worked upon by multiple Employee(s).
```
@ManyToMany
@JoinTable(
name = "employee_project",
joinColumns = @JoinColumn(name = "employee_id"),
inverseJoinColumns = @JoinColumn(name = "project_id"))
Set<Project> workingProjects;

//Project.class
@ManyToMany(mappedBy = "workingProject")
Set<Employee> workingEmployees;
```
> separate table created

#####  implement ManyToMany mappings with the self entity in JPA?
```
@ManyToMany
@JoinTable(name="table_friends", joinColumns=@JoinColumn(name="personId"),
inverseJoinColumns=@JoinColumn(name="friendId"))
private Set<User> friends;

@ManyToMany
@JoinTable(name="table_friends", joinColumns=@JoinColumn(name="friendId"),
inverseJoinColumns=@JoinColumn(name="personId"))
private Set<User> friendOf;
```
----

### Q. How will you handle batch insert in hibernate for optimal usage of memory, network and CPU?
>A naive approach to insert 1M rows in the database using Hibernate might look like this -
```
Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();
for ( int i=0; i<1000000; i++ ) {
Customer customer = new Customer(.....);
session.save(customer);
}
tx.commit();
session.close();
```
But when we try to run this code we may run into OutOfMemory exception and the performance of the method
will also be low.

###### Optimization Steps
- You will need to enable the **use of JDBC batching in hibernate** config file, for example batch size can be set to 50
> hibernate.jdbc.batch_size 50
- You can disable hibernate second level caching in hibernate config
> hibernate.cache.use_second_level_cache false

```
Session session = sessionFactory.openSession();
session.setCacheMode(CacheMode.IGNORE);
Transaction tx = session.beginTransaction();
for ( int i=0; i<1000000; i++ ) {
Customer customer = new Customer(.....);
session.save(customer);
if ( i % 50 == 0 ) { //50, same as the JDBC batch size
//flush a batch of inserts and release memory:
session.flush();
session.clear();
}
}
tx.commit();
session.close();
```
- Another good way of doing the same thing is to **use Hibernate's Stateless Session** (Best when dealing with millions of records)
```
StatelessSession session = sessionFactory.openStatelessSession();
Transaction tx = session.beginTransaction();
ScrollableResults customers = session.getNamedQuery("GetCustomers")
.scroll(ScrollMode.FORWARD_ONLY);
while (customers.next()) {
Customer customer = (Customer) customers.get(0);
customer.updateStuff(...);
session.update(customer);
}
tx.commit();
session.close();
```
----
### Q. What are different types of Http Status Codes?

- 1xx - Informational Status Code. 
>It means request has been received and process is continuing. (Its rarely used in production)

- 2xx - Success. 
> Action was successfully received, understood and accepted.
1. 200 Ok 
2. 201 Created - new resource is created 
3. 202 Accepted - The request has been accepted for processing, but the processing has not been completed

- 3xx - Redirection. 
> Further action must be taken in order to complete the request
1. 302 - Temporarily Redirect (Found)
2. 304 - Not Modified

- 4xx - Client Error
1. 400 - Bad Request (malformed request syntax, invalid request message, etc)
2. 401 - Unauthorized (may ask for credentials). authenticating may make difference 
3. 403 - Request was valid but server is refusing to respond to it, authenticating will make no difference 
4. 404 - Not Found

- 5xx - Server Error
1. 500 - Internal Server Error, server encountered unexpected condition 
2. 501 - Not Implemented 
3. 503 - Service Unavailable (may be down for maintenance)

----
### Q. What is Inversion of Control (or Dependency Injection)?
> The basic concept of IOC (Dependency of Injection) is that you do not create your objects but describe how
> they should be created.

> You don’t directly connect your component and services together in code but describe which services are
> needed by which component in configuration file.

> You just need to describe the dependency, the Spring container is then responsible for wiring it all up. It
> promotes Loose coupling with minimal effort and least intrusive mechanism. 

>IoC container have configurable option for eager or lazy initialization of beans services.
----
### Q. What are new features added in Java 8?
- Default methods enable new functionality to be added to the interfaces of libraries and ensure binary compatibility with code written for older versions of those interfaces.
- Optimistic Locking in Code using Stamped Locks provides very lightweight synchronization
- Concurrent Adders & Accumulators - DoubleAdder, DoubleAccumulator, LongAdder, LongAccumulator
- Array Parallel Sorting API
- Complete New Date API
- Functional Interfaces
- Stream API in Collections enables bulk operations, such as sequential and parallel map-reduce functions
- Improvements in ConcurrentHashMap - added methods for atomic & bulk operations
- New classes added to java.util.concurrent to support scalable updatable variables
- PermGen Space removed, Metaspace added

----
### Q. Can the keys in Hashing data structure be made Mutable?

> When we put the mutableKey to HashMap then hashcode() is calculated for the key.

>suppose it comes out to be 11. So the Object123 is successfully inserted into the HashMap at bucket Location 11.

> Then we modify the key and try to get the object. 

>HashMap's get() method again calculates the hashcode of the Key, since the Key is changed in between, so suppose hashcode() comes out to be 33 this time. 

>Now the get() method goes to the bucket at address 33 and tries to retrieve the object, but it finds nothing over there and returns the null.

>Never make changes to the hashmap's key, otherwise the associated object can not be fetched using get() method. 

> Though it will be accessible using other methods which iterate over the entire collection.

----

### Q. what is the default security configuration and how we can disable or customize
>In order to add security to our Spring Boot application, we need to add the security starter dependency:
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-security</artifactId>
</dependency>
```

> If we don't configure the password using the predefined property spring.security.user.password and start the application,
> a default password is randomly generated and printed in the console log:

> Using default security password: c8be15de-4488-4490-9dc6-fab3f91435c6

##### Disabling the Auto-Configuration
> We can do this via a simple exclusion:
```java
@SpringBootApplication(exclude = { SecurityAutoConfiguration.class })
public class SpringBootSecurityApplication {

    public static void main(String[] args) {
        SpringApplication.run(SpringBootSecurityApplication.class, args);
    }
}
```

#### Configuring Spring Boot Security (Spring 4)
- we can override the default password by adding our own:
> spring.security.user.password=password

- If we want a more flexible configuration, with multiple users and roles for example, 
- we need to make use of a full @Configuration class:

```java

@Configuration
@EnableWebSecurity
public class InMemoryAuthWebSecurityConfigurer
        extends WebSecurityConfigurerAdapter {

    @Override
    protected void configure(AuthenticationManagerBuilder auth)
            throws Exception {
        auth.inMemoryAuthentication()
                .withUser("com/xec/spring")
                .password("secret")
                .roles("USER");
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
                .csrf().disable()
                //.authorizeRequests().antMatchers("/app/**").permitAll().and()

                /*	.sessionManagement()
                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()*/
                .authorizeRequests().antMatchers("/app/**").authenticated().and()
                .authorizeRequests().antMatchers("/login").authenticated().and()
                //.addFilter(new JwtUsernameAndPasswordAuthenticationFilter(authenticationManager(), jwtManualConfig, secretKey))
                //.authorizeRequests().antMatchers("/app/**").permitAll().and()

                //.addFilterAfter(new JwtTokenVerifier(secretKey, jwtManualConfig), JwtUsernameAndPasswordAuthenticationFilter.class)

                .authorizeRequests()

                .anyRequest()
                .authenticated()
                .and()
                .formLogin()
                .loginPage("/login").permitAll()
                .defaultSuccessUrl("/sucess")
                .passwordParameter("password")
                .usernameParameter("username")
                .and()
                .rememberMe()
                .tokenValiditySeconds((int) TimeUnit.DAYS.toSeconds(21))
                .key("sha")
                .and()
                .logout()
                .logoutUrl("/logout")
                .clearAuthentication(true)
                .invalidateHttpSession(true)
                .deleteCookies("JSESSIONID", "remember-me")
                .logoutSuccessUrl("/login")
                .and()
                .formLogin()
                .failureHandler(authenticationFailureHandler())
                .and()
                .exceptionHandling()
                .accessDeniedHandler(accessDeniedHandler());
    }
}
```
### NOTE :: The @EnableWebSecurity annotation is crucial if we disable the default security configuration.

#### JWT
> Any user will be able to consume this API only if it has a valid JSON Web Token(JWT)
- Generating JWT
  ![generate](https://user-images.githubusercontent.com/16031518/200845915-cc995375-9523-4884-8229-2c3c50fb608e.jpg)
- manager
  ![manager](https://user-images.githubusercontent.com/16031518/200845988-52546ecf-de05-490a-87dc-4a66fcf5a040.jpg)
- validate JWT
  ![validation](https://user-images.githubusercontent.com/16031518/200845953-e850dfcb-fa7a-410a-8d1c-a274d100dd76.jpg)



----
### Q. Discuss Comparable and Comparator? Which one should be used in a given scenario?

> Comparable and Comparator both are used for allowing sorting a collection of objects.

- Comparable 
> should be used to define the **natural ordering behavior** of an Object.

> For example, java.lang.String implements Comparable interface to provide natural order to Strings

- Comparator 
> should be used to provide an external **controllable ordering behavior** which can override the
 default ordering behavior (natural ordering)

> Comparator is implemented like an **Adaptor Design Pattern** where a separate class is
> dedicated for providing the comparison behavior.

- Using Comparator in Java 8 is very easy with Lambda Expression
```
Arrays.sort(strings, (a, b) -> a.compareTo(b));
Arrays.sort(strings, String::compareToIgnoreCase); // this case using method reference
Arrays.sort(people, Comparator.comparing(Person::getLastName)); // sorts collection of people with lastname
```

#### sort a collection of data based on two properties?
```
List<Person> persons = new ArrayList<>();
persons.add(new Person("imran","khan", 26));
persons.add(new Person("Ayesha","Siddiqua", 22));
    persons.sort(
        Comparator.comparing(Person::getLastName)
            .thenComparing(Person::getFirstName)
                .thenComparing(
                    Person::age,
                        Comparator.nullsLast(CASE_INSENSITIVE_ORDER)));
```
----

### Q. What is difference between sleep(), yield() and wait() method?
1. wait() method releases the acquired lock when the thread is waiting till someone calls notify() **while Thread.
   sleep() method keeps the lock even if thread is waiting.**

    ```
    synchronized(monitor) {
    Thread.sleep(1000); // LOCK is held by the current thread
    }
    synchronized(monitor) {
    monitor.wait(); // LOCK is released by current thread
    }
    ```
2. wait() can only be called from synchronized context otherwise it will throw IllegalMonitorStateException,
   **while sleep can be called from any code block.**

3. wait() is called on an Object **while sleep is called on a Thread.**

4. waiting thread can be awakened by calling notify()/notifyAll() methods **while sleeping thread can't be awakened.
   (though can be interrupted)**

5. . In case of sleep() Thread immediately goes to Runnable state after waking up **while in case of wait(),
   waiting thread first fights back for the lock and then go to Runnable state.**

#### yield Vs sleep
>  Major difference between yield and sleep in Java is that yield() method pauses the currently executing thread temporarily 
   for giving a chance to the remaining waiting threads of the same priority to execute. 

> If there is no waiting thread or all the waiting threads have a lower priority then the same thread will continue
   its execution.

##### In Layman's Terms

* **sleep(n)** - Thread is done with its time slot, and please don’t give it another one for at least n milliseconds. The
  OS doesn’t even try to schedule the sleeping thread until requested time has passed.

* **yield()** - Thread is done with its time slot, but it still has work to do. The OS is free to immediately give the 
  thread another time slot, or to give some other thread or process the CPU the yielding thread just gave up.

* **wait()** - Thread is done with its time slot, Don’t give it another time slot until someone calls notify(). As with
  sleep(), the OS won’t even try to schedule your task unless someone calls notify() or one of a few other
  wakeup scenarios occurs (spurious wakeup).

----
### Q. What do you think is the reason for String Class to be Immutable?

* Immutability brings inherent **thread-safety** to the usage of String class in a concurrent program. So multiple 
  threads can work on the same String object without any data corruption. There is **absolutely no need to
  synchronize** the code because of String objects.
* StringPooling is possible only because of immutability because the underlying contents of the String will
  never change. This helps **reducing the overall memory footprint** of the application using lots of String objects.
* Hash code for **Immutable objects** are calculated lazily on first usage and then **cached for future reference.** 
  This gives the **benefit of performance** when we use Immutable Key's in any hashing data structure.

----
### Q. We have an Application and we want that only Single Instance should run for that Application. If Application is already running then second instance should never be started. How would you handle this in Java?
>There are two main ways to handle such scenario in Java -
1. Use a Socket networking in your application and start a server socket on a predefined port. When second
instance try to start up then check if **the port os already occupied** or not and accordingly take the decision.
2. Use a shared **file lock using FileChannel** and check if that temp file is already locked by some running
process or not. If yes then terminate the startup process for second instance.
[SingleInstanceLock.java](Threads/src/com/xec/thread/SingleInstanceLock.java)

----
### Q. Prevent Breaking a programs.Singleton Class Pattern

```java
public final class programs.Singleton {

    private static volatile programs.Singleton instance = null;

    private programs.Singleton() {
    }

    public static programs.Singleton getInstance() {
        if (instance == null) {
            synchronized (programs.Singleton.class) {
                if (instance == null) {
                    instance = new programs.Singleton();
                }
            }
        }
        return instance;
    }
}
```

##### Deserialization
```
protected Object readResolve() {
return instance;
}
```

##### Cloning
```
@Override
    protected Object clone() throws CloneNotSupportedException  {
        throw new CloneNotSupportedException();
    }
```

##### Reflection
```
private programs.Singleton() {
        // Check if we already have an instance
        if (instance != null) {
           throw new IllegalStateException("programs.Singleton" +
             " instance already created.");
        }
    }
```
[java-singleton-design-pattern-best-practices-examples](https://www.digitalocean.com/community/tutorials/java-singleton-design-pattern-best-practices-examples)

----

### Q. print second-highest number from stream?

##### use IntStream
```
System.out.println( Arrays.stream(myInt) //IntStream
.boxed() //Stream<Integer>
.sorted(Comparator.reverseOrder())
.skip(1)
.findFirst() Optional<Integer>
.get());
```
----

### Q. What is optional, and what is it best used for? (java.util)
> Optional is a new container class which used to represent optional values that either exist or do not exist. 

> Optional’s chief  benefit is avoiding null checks, and there are no longer any “NullPointerException” results at run-time.
----

### Q. Difference Between Pessimistic Approach and Optimistic Approach in DBMS

##### Definition
- Pessimistic
>It locks the database’s record for update access and other users can only access record as read-only or have to wait for a record to be ‘unlocked’.
- Optimistic
>  This approach does not need any locking or time-stamping method. In an optimistic approach, a transaction is executed without any problems of restriction until transaction is committed.

##### Locking 
- Pessimistic
- >It locks records so that selected record for update will not be changed meantime by another user
- Optimistic
> It doesn’t lock the records as it ensures record wasn’t changed in time between SELECT & SUBMIT operations.

##### conflicts
- Pessimistic
> The conflicts between transactions are very large in this approach
- Optimistic
> The conflicts between transactions are less than compared to pessimistic approach.

##### synchronization of transactions
- Pessimistic
> The synchronization of transactions is conducted in start phase of life cycle of execution of a transaction
- Optimistic
> The synchronization of transactions is conducted in later phase or gets delayed in execution of a transaction.

##### synchronization of transactions
- Pessimistic
> It is simple in designing and in programming.
- Optimistic
> It is more complex in designing and managing deadlocks’ risk.

##### storage cost
- Pessimistic
> higher
- Optimistic
> It has a relatively lower storage cost.

#####  concurrency
- Pessimistic
> It has a lower degree of concurrency
- Optimistic
> It has a high degree of concurrency


#####  when to use?
- Pessimistic
> This approach is found to use where there are more transaction conflicts

> It is suitable for a small database or a table which has less records
- Optimistic
> This approach is found to use where there are fewer transaction conflicts or very rare.

>It is suitable for a large database or has more records

#####  transaction phases
- Pessimistic
> Validate -> Read -> Compute -> Write
- Optimistic
> Read -> Compute -> Validate ->  Write

#####  Advantage
- Pessimistic
> It helps in protecting the system from the concurrency conflict
- Optimistic
> It allows the conflict to happen


[pessimistic-and-optimistic](https://www.geeksforgeeks.org/difference-between-pessimistic-approach-and-optimistic-approach-in-dbms/)

----
### Q. What is the contract between equals() and hashCode() methods in Java?

[contract-between-equals-and-hashcode](https://www.tutorialspoint.com/what-is-the-contract-between-equals-and-hashcode-methods-in-java)

----

### Q. if the equals() method is overridden without overriding hashCode(), or vice versa.?

[why-override-equals-and-hashcode-methods-java/](https://www.techiedelight.com/why-override-equals-and-hashcode-methods-java/)

----
### Q. How lazy loading works for collection of objects? and what is N+1 problem ?
##### The proxy is created for field, it means employees will be a proxy over the collection. Now if you try to iterate over the elements of the collection, there are basically two possibilities:
```java
public class Company {
private String name;

    @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.LAZY)
    private Set<Employee> employees;
}
```
> If you're not in a transaction, LazyInitializationException will be thrown. This is good because you know, that you have to fetch them eagerly is this query.

> If you're within a transaction, then hibernate will fetch every element that you're iterating over. That's a huge performance overhead, because you need to fire a query to fetch the parent entity and then one query for each child. If there are N children, you need to make N+1 calls to the database, this is also called N + 1 select problem.
----

### Q.  Java code to Segregate 0s and 1s in an array

[Java code to Segregate 0s and 1s in an array](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/Program5.java)

----
### Q. Given an array find which pattern it matches

[program6.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program6.java)

----
### Q. use linkedList and find middle element but don't use size?

[program7.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program7.java)

----
### Q. create a singleton class and protect it from breaking

[Singleton.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/Singleton.java)

----
### Q. create enum and print all enum elements and find is something is present

[program9.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program9.java)

----
### Q. Design a new implementation of the Map interface

[CreateMap.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/CreateMap.java)

----
### Q. print some patterns in java

[patterns](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/Patterns.java)

----
### Q. print Fibonacci

[fibbonacci.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/fibbonacci.java)

----
### Q. sum of the squares of all the odd numbers in the array.

[program14.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program14.java)

----
### Q. Given an array of n integers and a number k, find the pairs of numbers in the array such that the difference between the pair is k.

[program15.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program15.java)

----
### Q. Write a function to return the longest even length word in a sentence.

[program16.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program16.java)

----
### Q. Write a function to count the number of unique digits in a number

[program17.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program17.java)

----
### Q. god => print -> //god,ogd,dgo,gdo,odg,dog (permute)

[program18.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program18.java)

----
### Q. check if pivot or not
##### Find an element in array such that sum of left array is equal to sum of right array

[program19.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program19.java)

----
### Q. check the output of employee and address class

[program20.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program20.java)

----
### Q. get only employee having dept = "IT" && Convert in map key--id, value--Employee

[program21.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program21.java)

----
### Q. merge the linked list of integer and contact as string

[program22.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program22.java)

----
### Q. write a query for self join
```
Database
Employee-- id, name, mgid
id, name, mgid
1.  Alok  3
2   Niraj 3
3   Saurya 4
4   Siva   5

    name , mgname
    Alok  Saurya
    Niraj Saurya,
    Saurya Siva

    select emp.name,man.name from Employee emp
    join Employee man on emp.madid=man.id;
```
----
### Q. do itertor operations on employee list
> 

[IteratorProgram.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/IteratorProgram.java)

----
### Q. print all words start with G using streams?

[program23.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program23.java)

----

### Q. Find some random name in java

[program24.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/program24.java)

----
### Q. design a class to throw exception on 2nd constructor

[designClass.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/designClass.java)

----
### Q. what is cascade in hibernate
> Cascade is the feature provided by hibernate to automatically manage the state of mapped entity whenever the state of its relationship owner entity is affected.

#### JPA Cascade Type
- ALL  (propagates all operations)
- PERSIST (propagates the persist operation from a parent to a child entity)
```
  public void whenParentSavedThenChildSaved() {
  Person person = new Person();
  Address address = new Address();
  address.setPerson(person);
  person.setAddresses(Arrays.asList(address));
  session.persist(person); //address also persist
  session.flush();
  session.clear();
  }
```  
- MERGE (propagates the merge operation from a parent to a child entity)
```
Address savedAddressEntity = session.find(Address.class, addressId);
Person savedPersonEntity = savedAddressEntity.getPerson();
savedPersonEntity.setName("devender kumar");
savedAddressEntity.setHouseNumber(24);
session.merge(savedPersonEntity); //address also merge
session.flush();
```
- REMOVE
>  propagates the remove operation from parent to child entity. Similar to JPA's CascadeType.REMOVE,
> we have CascadeType.DELETE, which is specific to Hibernate
```
Person savedPersonEntity = session.find(Person.class, personId);
session.remove(savedPersonEntity);
session.flush();
```
- REFRESH ( the child entity also gets reloaded from the database whenever the parent entity is refreshed)
- DETACH (child entity will also get removed from the persistent context)
- SAVE_UPDATE (Hibernate-specific operations like save, update and saveOrUpdate)
```
@Test
public void whenParentSavedThenChildSaved() {
Person person = buildPerson("devender");
Address address = buildAddress(person);
person.setAddresses(Arrays.asList(address));
session.saveOrUpdate(person); //address also save / update
session.flush();
}
```
----
### Q. Define all Spring Annotations ?

#### Spring Framework Stereotype Annotations

- @Component (on class level)
>The @Component annotation marks the Java class as a bean or say component so that the component scanning mechanism 
> of Spring can add into the application context.

- @Controller (on class level)
>  This annotation can be used to identify controllers for Spring MVC or Spring WebFlux.

- @Service (on class level) (form of @Component)
>  The @Service marks a Java class that performs some service, such as execute business logic, 

>perform calculations and call external APIs.

- @Repository (on class level) (form of @Component)
>  The @Repository annotation works as marker for any class that fulfills the role of repository or Data Access Object.

> This annotation has a automatic translation feature. 

> For
> example, when an exception occurs in
> the@Repository there is a handler for that exception and
> there is no need to add a try catch block.

- @Bean (on method level)
>  @Bean annotation works with @Configuration to create Spring beans.

- @ComponentScan
> This annotation is used with @Configuration annotation
> to allow Spring to know the packages to scan for
> annotated components.

- @Lazy (on method level)
> This annotation is used on component classes.
> By default, all autowired dependencies are created and
> configured at startup.

- @Value (on field, constructor parameter,method parameter)
> The @Value annotation indicates a default value expression for the field or
> parameter to initialize the property with

#### Spring Boot Annotations
- @Configuration
> It is used on classes which define beans.
> @Configuration is an analog for XML configuration file
> – it is configuration using Java class. J
> ava class annotated with @Configuration is a
> configuration by itself and will have methods to
> instantiate and configure the dependencies.

- @EnableAutoConfiguration (on e main application class)
>  The @EnableAutoConfiguration annotation implicitly defines a base “search package”.

> This annotation tells Spring Boot to start adding beans based on classpath
> settings, other beans, and various property settings

- @SpringBootApplication (on e main application class)
>  The class that is annotated with the @SpringBootApplication must be kept in the base package.

> The one thing that the @SpringBootApplication does is a component scan. But it will scan only its sub-packages.

>The @SpringBootApplication is a convenient annotation that adds all the following:

- @Configuration 
- @EnableAutoConfiguration 
- @ComponentScan


#### Spring MVC and REST Annotations

- @Controller (on class level)
> The @Controller annotation allows auto-detection of component classes in the classpath
> and auto-registering bean definitions for them.

- @RequestMapping (on class & method level)
> The @RequestMapping annotation is used to map web requests onto specific handler classes and handler methods.

> When @RequestMapping is used **on class level** it creates a base URI for which the controller will be used.

> When this annotation is used **on methods** it will give you the URI on which the handler methods will be executed.
```java
@Controller
@RequestMapping("/welcome")
public class WelcomeController{
@RequestMapping(method = RequestMethod.GET)
public String welcomeAll(){
return "welcome all";
}
```
> The Spring MVC @RequestMapping annotation is capable of handling HTTP request methods, such as
> GET, PUT, POST, DELETE, and PATCH.

- @RequestParam
>The @RequestParam annotation is used with @RequestMapping to bind a web request parameter to
  the parameter of the handler method.

- @EnableWebMvc
> The @EnableWebMvc annotation provides the Spring Web MVC configuration such as setting
> up the dispatcher servlet, enabling the @Controller and the @RequestMapping annotations
> and setting up other defaults.

----
### Q. What are the general considerations or best practices for defining your Hibernate persistent classes?
1. You must have a default no-argument constructor for your persistent classes and there should be getXXX() (i.e accessor/getter) and setXXX( i.e. mutator/setter)
methods for all your persistable instance variables.
2. You should implement the equals() and hashCode() methods based on your business key and it is important not to use the id field in your equals() and hashCode()
definition if the id field is a surrogate key (i.e. Hibernate managed identifier). This is because the Hibernate only generates and sets the field when saving the object.
3. It is recommended to implement the Serializable interface. This is potentially useful if you want to migrate around a multi-processor cluster. 
4. The persistent class should not be final because if it is final then lazy loading cannot be used by creating proxy objects. 
5. Use XDoclet tags for generating your *.hbm.xml files or Annotations (JDK 1.5 onwards), which are less verbose than *.hbm.xml files.

----
### Q. What is the difference between the session.get() method and the session.load() method?
>Both the session.get(..) and session.load() methods create a persistent object by loading the required object from the database. 

>But if there was not such object in the database then the method session.load(..) throws an exception whereas session.get(&) returns null.
----
### Q. How to create Bean

- if class is predefined use
> @Bean

- if it is user defined use
> @component/ @Service / @Controller / @RestController

----
### Q. Singleton scope in spring VS singleton class in java?
> Singleton scope in Spring is not same as singleton pattern. Some of the main differences between these 2 are

- Singleton pattern ensures one instance of a particular class of per class loader.
- Spring Singleton is  “per container per bean”.
> When a bean is a singleton, only one shared instance of the bean will be managed, and all requests for beans with an id or ids matching that bean definition will result in that one specific bean instance being returned by the Spring container.


#### Singleton Scope Example
> Singleton instance in Spring will be stored in a cache of such singleton beans, and all subsequent requests 
> and references for that named bean will result in the cached object being returned.
```java
@RunWith(SpringRunner.class)
@SpringBootTest
public class SingletonScopeTest {

    private static Logger log = LoggerFactory.getLogger(SingletonScopeTest.class);

    @Resource(name = "bean1")
    CustomerAccount account1;

    @Resource(name = "bean1")
    CustomerAccount duplicateAccount;

    @Resource(name = "bean2")
    CustomerAccount account2;

    @Test
    public  void testSingletonScope(){
        log.info(account1.getName());
        log.info(account2.getName());

        log.info("account are equal:: {}", account1 == account2);
        log.info("Duplicate Account :: {}", account1 == duplicateAccount);
    }
}
```
##### how it works
- Spring Ioc container created 2 instances of the same class based on bean definition and binds them with ids.
- Spring bean definition work as a key-value pair, the key is mapped to bean id and value mapped to the bean instance.
- Each key reference returns the same bean instance (refer to “bean1” always return bean instance associated with id “bean1”).

[SingletonConfig.java](https://github.com/emranxec/KeepLearning/blob/main/src/main/java/com/xec/spring/interview/SingletonConfig.java)

----
### Q. The difference between @Inject vs. @Autowire vs. @Resource?

#### @resource (field injection,setter injection) (javax.annotation.Resource)
- Match by Name 
- Match by Type 
- Match by Qualifier (NoUniqueBeanDefinitionException)

```
@Resource(name="namedFile")
private File namedFile; //Match by Name 
    
@Resource
private File defaultFile; //Match by Type 

@Resource
@Qualifier("defaultFile")
private File dependency1; //Match by Qualifier

----Setter Injection------
 @Resource(name="namedFile")
    protected void setDefaultFile(File defaultFile) {
        this.defaultFile = defaultFile; ////Match by Name 
    }
    
 @Resource
    protected void setDefaultFile(File defaultFile) {
        this.defaultFile = defaultFile; ////Match by Type 
    }

 @Resource
    @Qualifier("namedFile")
    public void setArbDependency(File arbDependency) {
        this.arbDependency = arbDependency; ////Match by Qualifier
    }
```
#### The @Inject Annotation (javax.inject.Inject)
- Match by Type 
- Match by Qualifier  (NoUniqueBeanDefinitionException )
- Match by Name

```xml
<dependency>
    <groupId>javax.inject</groupId>
    <artifactId>javax.inject</artifactId>
    <version>1</version>
</dependency>
```

```
 @Inject
private ArbitraryDependency namedDependency; //Match by Type
    
@Inject
@Qualifier("defaultFile")
private ArbitraryDependency defaultDependency; //Match by Qualifier

@Inject
@Named("yetAnotherFieldInjectDependency")
private ArbitraryDependency yetAnotherFieldInjectDependency; //Match by Name
```

#### The @Autowired Annotation (org.springframework.beans.factory.annotation)
> The behaviour of the @Autowired annotation is similar to the @Inject annotation. The only difference is that the @Autowired annotation is part of the Spring framework.

- Match by Type
- Match by Qualifier  (NoUniqueBeanDefinitionException )
- Match by Name


```
@Autowired
    private ArbitraryDependency fieldDependency; //Match by Type
    
@Autowired
@Qualifier("autowiredFieldDependency")
private FieldDependency fieldDependency1;  //Match by Qualifier

//Match by Name = autowiredFieldDependency

@Component(value="autowiredFieldDependency")
public class ArbitraryDependency {

    private final String label = "Arbitrary Dependency";

    public String toString() {
        return label;
    }
}
 
 @Autowired
private ArbitraryDependency autowiredFieldDependency; // Match by Name

```
#### when to use what?

![image](https://user-images.githubusercontent.com/16031518/202534980-169d4858-90ae-4253-8a5c-df0e3f70aa6c.png)

----
### Q. When to use path param or when to use Query param? as per design perspective?
> Request URI parameters are added to end of URL that refer/point to specific REST API
> resource.
> There are two types of parameters: 
- Path Parameters 
- Query Parameters.

#### PATH PARAMETER 
> Path Parameters are a part of URI. It takes you to the specific endpoint/resource. They are added to URI after ‘/’
> in curly braces {}. Path parameters point to specific REST API resource within a collection.

>– GET /students/{grade}
```java
//JSON
@Path("/users")
public class UserRestService {

	@GET
	@Path("{id}")
	public Response getUserById(@PathParam("id") String id) {

	   return Response.status(200).entity("getUserById is called, id : " + id).build();

	}

}
//Spring

    @GetMapping("/api/employees/{id}")
    @ResponseBody
    public String getEmployeesById(@PathVariable String id) {
        return "ID: " + id;
    }
```
#### QUERY PARAMETER
> Query Parameter in NOT part of URI. They are added to URI after a question mark symbol (‘?’) with
> name=value pairs separated by ampersands symbol (&). They define sort, pagination and filter operations.

> we can use @RequestParam to extract query parameters, form parameters, and even files from the request.
```java
//Json
@Path("/users")
public class UserService {

    @GET
    @Path("/query")
    public Response getUsers(
            @QueryParam("from") int from,
            @QueryParam("to") int to,
            @QueryParam("orderBy") List<String> orderBy) {

        return Response
                .status(200)
                .entity("getUsers is called, from : " + from + ", to : " + to
                        + ", orderBy" + orderBy.toString()).build();

    }

}
//spring
class someClass{
@PostMapping("/api/foos")
@ResponseBody
public String addFoo(@RequestParam(name = "id") String fooId, @RequestParam String name) {
return "ID: " + fooId + " Name: " + name;
}
    }
```
> GET /students?offset=50&limit=20

#### COMPARISON - PATH PARAMETER AND QUERY PARAMETER

![image](https://user-images.githubusercontent.com/16031518/202660484-cfdcdc84-ebec-42fc-baa1-e50bf729c1ff.png)

| Framework       | Path segment            | http query parameter        | 
|-----------------|-------------------------|-----------------------------|
| Jersey (JAX-RS) | @PathParam              | @QueryParam                 |
| Spring RESTFul  | @PathVariable           | @RequestParam               |
| example         | http://xyz.ir/{segment} | http://xyz.ir/?param{param} | 

ramework	Path segment	http query parameter
Jersey (JAX-RS)	@PathParam	@QueryParam
Spring RESTFul	@PathVariable	@RequestParam
example	http://xyz.ir/{segment}	http://xyz.ir/?param{param}
----
### Q. difference between application.properties vs application.yml ? which one to use when?
- .properties stores data in sequential format, whereas
  **.yml stores data in hierarchical format.**

- .properties supports only key-value pairs (basically string values), whereas 
  **.yml supports key-value pair, as well as map, list & scalar type values.**

- .properties is specifically used by Java, whereas
  **.yml can be used by other languages (eg Java, Python, ROR, etc).**

- When managing multiple configuration profiles, then:
.properties requires you to create .properties file per every profile, **whereas in
.yml you can create a section for each specific profile inside a single .yml file.**

- **In Spring projects, @PropertySource annotation can only be used with .properties.**
```java
@PropertySources({
@PropertySource("classpath:db.properties"),
@PropertySource("classpath:root.properties")})
public class DBConfiguration {
}
```
----
### Q. can we use @Component/@Configuration classes be final?
> Don't make them final. If you use any AOP (including transaction support) on concrete classes, spring will use CGLIB to dynamically extend your class in order to make a proxy. 

> And the requirement for CGLIB to work is to have your classes non-final. Otherwise, an exception will be thrown.

> If @Configuration class will be final or will have a final method, Spring will throw BeanDefinitionParsingException.
----
### Q. if we want to load only 75% of bean classes in spring? how to achieve it?
> You can add @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE) to the component or the bean, in order to not create it on boot time (unless another bean autowired it). But with this solution your bean will not be a singleton which mean that every place you are autowire the component, a new instance will be created.

> Add @Lazy in your bean definition or add @Lazy at class level to load all beans lazily.

> In your application , the main class is present in the package com.test.companydomain.core and by default springboot scans all classes and packages under the current package of the main application for autowiring beans. So , you have provided the annotation @ComponentScan to explicitly tell spring to scan other packages as well.But your util class is in the package com.test.domain.assetManager.server.common.utils , which is not included in the @ComponentScan annotation, so it is not taken up for component scanning.
----
### Q. How to make sure the JSON structure is same from client to server?

[jersey-client-to-use-the-same-json-format-that-the-server](https://stackoverflow.com/questions/31622055/how-do-i-configure-the-jersey-client-to-use-the-same-json-format-that-the-server)

----
### Q. how to remove special characters from json body parameters?
```
BufferedReader reader = new BufferedReader(new FileReader(new File("resources/json29.txt")));

class MyJSONObject {
private String color;
private String imageUrl;
private String styleId;
private double originalPrice;
private double price;
private String productUrl;
private double percentOff;
// getter & setter
}

class MyJSONObjectDeserializer implements JsonDeserializer<MyJSONObject> {

    @Override
    public MyJSONObject deserialize(final JsonElement json, final Type typeOfT,
            final JsonDeserializationContext context) throws JsonParseException {

        JsonObject jsonObject = json.getAsJsonObject();

        MyJSONObject myJSONObject = new MyJSONObject();
        myJSONObject.setColor(jsonObject.get("color").getAsString());
        myJSONObject.setImageUrl(jsonObject.get("imageUrl").getAsString());
        myJSONObject.setStyleId(jsonObject.get("styleId").getAsString());
        myJSONObject.setProductUrl(jsonObject.get("productUrl").getAsString());

        try {
            String price = jsonObject.get("price").getAsString();
            String originalPrice = jsonObject.get("originalPrice").getAsString();
            String percentOff = jsonObject.get("percentOff").getAsString();

            myJSONObject.setPrice(Double.valueOf(price.substring(1)));
            myJSONObject.setOriginalPrice(Double.valueOf(originalPrice.substring(1)));
            myJSONObject.setPercentOff(Double.valueOf(percentOff.substring(0,
                    percentOff.length() - 1)));

        } catch (NumberFormatException e) {
            e.printStackTrace();
        }

        return myJSONObject;
    }
}

MyJSONObject data = new GsonBuilder()
.registerTypeAdapter(MyJSONObject.class, new MyJSONObjectDeserializer()).create()
.fromJson(reader, MyJSONObject.class);

System.out.println(new GsonBuilder().setPrettyPrinting().create().toJson(data));
```

----
### Q. session.commit vs session.flush
 - flush(): 
> Flushing is the process of synchronizing the underlying persistent store with persistable state held in memory.

> it will update or insert into your tables in the running transaction, **but it may not commit those changes.**

- Commit(): 
> Commit will make the database commit.When you have a persisted object and you change a value on it, 

> it becomes dirty and hibernate needs to flush these changes to your persistence layer.

> So You should commit but it also **ends the unit of work.**

----
### Q. How ArrayList internally works?
- ArrayList is a resizable array implementation in java. 
- The backing data structure of ArrayList is an array of Object class. 
- When creating an ArrayList you can provide initial capacity then the array is declared with the given capacity. 
- The default capacity value is 10. 
- If the initial capacity is not specified by the user then the default capacity is used to create an array of objects. 
- When an element is added to an ArrayList it first checks whether the new element has room to fill or it needs to grow the size of the internal array, 
- If capacity has to be increased then the new capacity is calculated which is 50% more than the old capacity and the array is increased by that capacity.

----
### Q. how to disable first level cache in hibernate
> First level cache is enabled by default, and you can not disable it.

> Though we can not disable the first-level cache in hibernate, we can certainly remove some objects from it when needed. 

>This is done using two methods :

- evict(): removes a particular object from cache associated with the session
- clear(): remove all cached objects associated with the session
```
//fetch the department entity again
department = (DepartmentEntity) session.load(DepartmentEntity.class, new Integer(1));
System.out.println(department.getName());

	session.evict(department);
	//session.clear(); 
```
----
### Q. what is PermGen n MetaSpace
> When we create a static variable or method it is stored in the special area on heap: PermGen(Permanent Generation), 
> where it lays down with all the data applying to classes(non-instance data). Starting from Java 8 the PermGen became - Metaspace.

>The difference is that Metaspace is auto-growing space, 
> while PermGen has a fixed Max size, and this space is shared among all of the instances.

> Static methods are stored in Metaspace space of native heap as they are associated to the class 
> in which they reside not to the objects of that class. But their local variables and the passed 
> arguments are stored in the stack.

[static-variables-methods-java-where-jvm-stores-them](https://www.linkedin.com/pulse/static-variables-methods-java-where-jvm-stores-them-kotlin-malisciuc/)

----
### Q. where variables ,static variable , block and method saves data?

#### Heap Memory
> Heap memory is the runtime data area shared among all JVM threads to allocate memory for all class instances and arrays.

> Java classifies heap memory into two categories – Young Generation and Old Generation.

#### Non-Heap Memory
> Non-heap memory consists primarily of a method area that stores class structures, fields, method data, and the code for methods/constructors.

> Similar to the Heap memory, all JVM threads have access to the method area.

- Java 8 removes the PermGen space and introduces a new native memory space named Metaspace.

> Before Java 8, PermGen stores static members like static methods and static variables. Additionally, PermGen also stores interned strings.

> Since Java 8, Metaspace only stores the class metadata, and heap memory keeps the static members.

> Method area: In the method area, all class level information like class name, immediate parent class name, methods and variables information etc. are stored, including static variables. There is only one method area per JVM, and it is a shared resource. 

> From java 8, static variables are now stored in Heap area.

> Heap area: Information of all objects is stored in the heap area. There is also one Heap Area per JVM. It is also a shared resource.

> Stack area: For every thread, JVM creates one run-time stack which is stored here. Every block of this stack is called activation record/stack frame which stores methods calls. All local variables of that method are stored in their corresponding frame. After a thread terminates, its run-time stack will be destroyed by JVM. It is not a shared resource.

> PC Registers: Store address of current execution instruction of a thread. Obviously, each thread has separate PC Registers.

> Native method stacks: For every thread, a separate native stack is created. It stores native method information.

#### Classes (loaded by the classloaders)
> go in a special area on heap : Permanent Generation until java 8

> As of Java 8, the PermGen space has been replaced with Metaspace. 
> Loaded and JIT-compiled classes now go there. PermGen no longer exists.

####  information related to a class
> All the information related to a class like name of the class, Object arrays associated with the class, 
> internal objects used
> b
> y J
> 
V
M (like java/lang/Object) and optimization information goes into the Permanent Generation area.

#### static member variables
> All the static member variables are kept on the Permanent Generation area again ?

- The variables themselves yes.
- the static member variables are in a frame that is allocated in the permgen heap
- the objects/arrays referred to by those variables may be allocated in any heap.

#### Objects
> Objects go on a different heap : Young generation ?

-Not necessarily. Large objects may be allocated directly into the tenured generation

#### non-static methods
>  all the parameters and local variables go onto the stack

> whenever there is a concrete invocation of that method, we get a new stack-frame associated with it.

####  local variables of a static method
>  They are stored on the stack, just like local variables in non-static methods.

####  return type of method
>  value returned by a (non-void) method call, then it is either returned on the stack or in a machine register. If it is returned on the stack, this takes 1 or two words, depending on the return type.

----
### Q. how to skip some jars in spring boot
- Mention your dependency in pom.xml which you need to exclude in exclusion tag. Then excluded dependency will not be downloaded:
```xml
<dependency>
      <groupId>sample.ProjectA</groupId>
      <artifactId>Project-A</artifactId>
      <version>1.0</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion> 
 <!-- declare the exclusion here -->
          <groupId>sample.ProjectB</groupId>
          <artifactId>Project-B</artifactId>
        </exclusion>
      </exclusions> 
    </dependency>
```
#### other approach
- Instead of messing around with <excludes> and then try to figure out what you need to include again (after figuring out what you excluded). Just override the version as explained here in the Spring Boot Reference Guide.

- Assuming you are using the spring-boot-starter-parent as the parent you can just add a <selenium.version> to your <properties> section to specify which version you want.
```xml
<properties>
  <selenium.version>2.53.0</selenium.version>
</properties>
```
- This will make Spring Boot use the version you want.
----
### Q. how to remove the tomcat server from spring boot

#### Maven Pom.xml 
> To exclude Tomcat from Spring Boot just add an exclusion block to the Spring Boot Starter Web dependency 
> and at the build time Maven will exclude Tomcat from Spring Boot.

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
    <exclusions>
        <exclusion>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-tomcat</artifactId>
        </exclusion>
    </exclusions>
</dependency>
```
#### Annotation
> When declaring the @SpringBootApplication annotation, there is a way to exclude all servers and do consider the spring boot application like the web.

> @SpringBootApplication(exclude = {EmbeddedServletContainerAutoConfiguration.class, WebMvcAutoConfiguration.class})

> And need to add the below property to non-rest applications so that spring boot does not try to start the
> WebApplicationContext. This should go to the application.properties.

> spring.main.web-environment=false


----
### Q. implement two threads running one after another

[JoinDemo.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/JoinDemo.java)

----
### Q. what is java promise? 
> functional style of programming

> Promise is a placeholder for an asynchronous operation that is ongoing.

> The Promise object is used for asynchronous computations. A Promise represents an operation that hasn't completed yet, but is expected in the future.

>Promises provide a few advantages over callback objects:

- Functional composition and error handling.
- Prevents callback hell and provides callback aggregation.

#### Real world examples
- java.util.concurrent.CompletableFuture

- Guava ListenableFuture

##### example
> We are developing a software solution that downloads files and calculates the number of lines and character frequencies in those files. 

> Promise is an ideal solution to make the code concise and easy to understand.

#### Other approach

- Async Method Invocation
> Asynchronous method invocation is a pattern where the calling thread is not blocked while waiting results of tasks.

> Asynchronous method invocation starts task processing and returns immediately before the task is ready. The results of the task processing are returned to the caller later.
```java
public class ThreadAsyncExecutor implements AsyncExecutor {
@Override
public <T> AsyncResult<T> startProcess(Callable<T> task, AsyncCallback<T> callback) {
var result = new CompletableResult<>(callback);
new Thread(
() -> {
try {
result.setValue(task.call());
} catch (Exception ex) {
result.setException(ex);
}
},
"executor-" + idx.incrementAndGet())
.start();
return result;
}
@Override
public <T> T endProcess(AsyncResult<T> asyncResult)
throws ExecutionException, InterruptedException {
if (!asyncResult.isCompleted()) {
asyncResult.await();
}
return asyncResult.getValue();
}
//other methods

public static void main(String[] args) throws Exception {
// construct a new executor that will run async tasks
var executor = new ThreadAsyncExecutor();
// start few async tasks with varying processing times, two last with callback handlers
final var asyncResult1 = executor.startProcess(lazyval(10, 500));
final var asyncResult2 = executor.startProcess(lazyval("test", 300));
final var asyncResult3 = executor.startProcess(lazyval(50L, 700));
final var asyncResult4 = executor.startProcess(lazyval(20, 400), callback("Deploying lunar rover"));
final var asyncResult5 =
executor.startProcess(lazyval("callback", 600), callback("Deploying lunar rover"));
// emulate processing in the current thread while async tasks are running in their own threads
Thread.sleep(350); // Oh boy, we are working hard here
log("Mission command is sipping coffee");

// wait for completion of the tasks
final var result1 = executor.endProcess(asyncResult1);
final var result2 = executor.endProcess(asyncResult2);
final var result3 = executor.endProcess(asyncResult3);
asyncResult4.await();
asyncResult5.await();

// log the results of the tasks, callbacks log immediately when complete
log("Space rocket <" + result1 + "> launch complete");
log("Space rocket <" + result2 + "> launch complete");
log("Space rocket <" + result3 + "> launch complete");
}
}
```
##### example
> Launching space rockets is an exciting business. The mission command gives an order to launch and after some undetermined time, the rocket either launches successfully or fails miserably.

- Callback
> Callback is a piece of executable code that is passed as an argument to other code, which is expected to call back (execute) the argument at some convenient time.

> Callback is a method passed to the executor which will be called at defined moment.
```java
public abstract class Task {

final void executeWith(Callback callback) {
execute();
Optional.ofNullable(callback).ifPresent(Callback::call);
}

public abstract void execute();
}
```
##### example
> We need to be notified after executing task has finished. We pass a callback method for the executor and wait for it to call back on us.

----
### Q. hashset vs treeset

![image](https://user-images.githubusercontent.com/16031518/202841356-6f371f60-af30-43fa-8558-9bb2ea37d11a.png "hashset vs Treeset")

----
### Q. print 4th highest salary
```roomsql
SELECT * FROM Employee WHERE sal =
(
    SELECT MIN(sal) FROM Employee
        WHERE  sal IN (
            SELECT DISTINCT TOP N
            sal FROM Employee
            ORDER BY sal DESC
        )
)

--2nd approach

SELECT ename,sal from Employee e1 where 
        N-1 = (SELECT COUNT(DISTINCT sal)from Employee e2 where e2.sal > e1.sal) 
```
----
### Q. total number of employee name from department where department has maximum employees join which year
```roomsql
  with EmployeeStartFinYear(FinYear, totalEmployee) as (
    select
      top 1 e.join_year,
      COUNT(*)
    from
      employees e
      join departments d on e.department_id = d.department_id
    GROUP by
      e.join_year
    ORDER BY
      e.join_year
  )
  select
    COUNT(e.employee_name),
    d.department_name
  from
    EmployeeStartFinYear
    join employees e on e.join_year = FinYear
    join departments d on e.department_id = d.department_id
  GROUP by
    d.department_name;
```

----
### Q. is singleton is lazy or eager loading?
> The Spring framework, **by default, initializes all singleton beans eagerly at the application startup** and put them in application context.

> However, in some cases we need to create beans whenever they required, but not at the application startup or bootstrapping application context time.

> In Spring, we can achieve this by using @Lazy annotation.

#### Spring Lazy Initialization
1. Using @Lazy on @Bean method
> note that  the results in console, customerBean not initialized on startup.
```java
    @Configuration
    @ComponentScan("com.javabydeveloper.spring.lazy")
    public class AppConfigForLazy {
    @Bean
    public Company companyBean(){
    return new Company();
    }
    @Bean
    public Employee employeeBean(){
    return new Employee();
    }
    
        @Lazy
        @Bean
        public Customer customerBean(){
            return new Customer();
        }
    }
```
- Using @Lazy on @Bean method
> If Lazy is present on a @Configuration class, this indicates that all @Bean methods within that @Configuration should be lazily initialized.
```java
   @Lazy
   @Configuration
   @ComponentScan("com.javabydeveloper.spring.lazy")
   public class AppConfigForLazy {
   @Bean
   public Company companyBean(){
   return new Company();
   }
   @Bean
   public Employee employeeBean(){
   return new Employee();
   }

   @Bean
   public Customer customerBean(){
   return new Customer();
   }
   }

```
- Eager Initialization using @Lazy(value = false)
> If we place @Lazy at @Configuration class, all the @Bean methods within that class should be initialized lazy.
```java
    @Lazy
    @Configuration
    @ComponentScan("com.javabydeveloper.spring.lazy")
    public class AppConfigForLazy {
    @Bean
    public Company companyBean(){
    return new Company();
    }
    @Bean
    public Employee employeeBean(){
    return new Employee();
    }
    
        @Lazy(value = false)
        @Bean
        public Customer customerBean(){
            return new Customer();
        }
    }
```
- @Lazy with @Autowired
> student instance will be created when ever it access using user.getStudent().
```java
@Component
public class User {

@Lazy
@Autowired
private Student student;
public User() {
System.out.println("User Instance Created");
}
public Student getStudent() {
return student;
}
}
@Lazy
@Component
public class Student {
    public Student() {
        System.out.println("Student Instance Created");
    }

    private String name;
    public String getName() {
        return name;
    }
}
```
----
### Q. Chocolate Distribution Problem

[ChocolateDistributionProgram.java](https://github.com/emranxec/KeepLearning/blob/main/Interview/src/programs/ChocolateDistributionProgram.java)

----
----
----
# self:

----
### Q. when to use what collection?
#### HashSet 
- it will offer Big O(1) time complexity

- we must override equals() and hashcode()
- scenarios:
> Given 1 million trades objects, you need to write a method that searches if
> the specified trade is contained in the collection or not.

#### PriorityQueue 
- elements are stored in a sorted order according to some priority associated with them
- the element with the higher priority is served before the element with lower priority.

> A network printer where multiple people submit print jobs at the same time, While one big print job is
> executing, PriorityQueue could re-arrange other jobs so that the small print jobs (with very less number of
> pages) execute on priority compared to big ones.

> Emergency department in any hospital handles patients based on their severity, thus priority queue could
> use to implement such logic.

- Binary Heap
> Finding top 10 most frequently used words in a very large file in O(n)

> Finding top 1 million numbers from a given large file containing 5 billion numbers in O(n)

----
### Q. when do we get lazy initialization exception in hibernate?
> Hibernate throws the LazyInitializationException when it needs to initialize a lazily fetched association 
> to another entity without an active session context. That’s usually the case if you try to use an uninitialized 
> association in your client application or web layer.

```java
class someClass {
    EntityManager em = emf.createEntityManager();
em.getTransaction().

    begin();

    TypedQuery<Author> q = em.createQuery(
            "SELECT a FROM Author a",
            Author.class);
    List<Author> authors = q.getResultList();
em.getTransaction().

    commit();
em.close();

for(
    Author author :authors)

    {
        List<Book> books = author.getBooks();
        log.info("... the next line will throw LazyInitializationException ...");
        books.size();
    }
}
```

[lazy_initialization_exception](https://thorben-janssen.com/lazyinitializationexception)

----
### Q. {2,-3,4,-5,6,-7,0,8,-8}
>
----
### Q. Qualifier replacement
>
----
### Q. can we create final class inside abstract class?
-  class - abstract (cannot create object)
-  class - static  (new MyOuterClass.MyInnerClass())
-  class - final  (new MyOuterClass().new MyInnerClass();)
-  class - static abstract (cannot create object)
-  class - static final (new MyOuterClass.MyInnerClass())
-  abstract - static (new MyOuterClass.MyInnerClass();)
-  abstract - static final (new MyOuterClass.MyInnerClass();)
-  abstract - class (cannot create object)
-  abstract - final (cannot create object)
-  final - static ( new MyOuterClass.MyInnerClass();)
-  final - abstract (cannot create object)
-  final - class( new MyOuterClass().new MyInnerClass2();)
       
----
### Q.what is aggregation vs combination & is-A vs Has-A?

#### IS-A relationship [inheritance]
 ```java
class Apple extends Fruit {
}
 ```
#### HAS-A relationship
> Association is a relation between two separate classes which establishes through their Objects. Association can be one-to-one, one-to-many, many-to-one, many-to-many.

> Composition and Aggregation are the two forms of association.

- Aggregation [Has-A] [unidirectional association] [weak Association]
> Student Has-A name. Student Has-A ID. Student Has-A Dept

> Department Has-A Students

> Institute Has-A Departments
 ```java
class Student {

    // Attributes of student
    String name;
    int id;
    String dept;
}
class Department {
    // Attributes of Department class
    String name;
    private List<Student> students;
}
class Institute {

    // Attributes of Institute
    String instituteName;
    private List<Department> departments;
}
```

- Composition [part-of] [part-of relationship] [dependent on each other] [strong Association]
> Composition is a restricted form of Aggregation in which two entities are highly dependent on each other.

```java
public class House
{
private Room room;
public House()
{
room = new Room();
}
}
```
----
### Q. How HashSet checks for duplicates in Java?
> When you put an object into a HashSet, it uses hashcode value to determine where to put the object in the set. 

> It also compares the objects hashcode value to other object's hashcode in the hashset. 
 
> But two objects having same hashcode might not be equal. 

>If the hashcode of two objects are equal then hashset uses equal() to see if the hashcode matched objects are really equal. 

> And if they are equal the hashset knows that the new object is duplicate of something exist in the HashSet.
> And the add does not happen. The add() of hashcode returns false.

----
### Q. create a user defined functional interface?
```java
@FunctionalInterface
public interface Lambda {
public String demo();
}
Lambda lambda = ()-> "new lambda";
System.out.println(lambda.demo());
```
----
### Q. what is class level lock vs object level lock?
```java
class Geek implements Runnable {
    public void run() {
        Lock();
    }

    public void Lock() {
        System.out.println(
                Thread.currentThread().getName());
        synchronized (this) { //object level lock
            System.out.println(
                    "in block "
                            + Thread.currentThread().getName());
            System.out.println(
                    "in block "
                            + Thread.currentThread().getName()
                            + " end");
        }
        synchronized (Geek.class) { //class level lock
            System.out.println(
                    "in block "
                            + Thread.currentThread().getName());
            System.out.println(
                    "in block "
                            + Thread.currentThread().getName()
                            + " end");
        }
    }
}
```
----
### Q. handle pagination using webservice?
>
----
### Q. how to configure techniques of JVM?
>
----
### Q. print all children and all parents of a treemap

----
### Q. what problem we face in request body if all structure is good?

----
### Q. We have to use qualifier for all 1000 implementations? any other way?

----
### Q. if two API request hits at same time how to manage them?
>
----
### Q. send image object of 20mb in json request
>
----
### Q. How to check all API status and save if all success else fail all
>
----
### Q. test your application

----
### Q. how to process: 10000 request handling at once & persist in DB ?
----

### Q. load a big transactional file and fetch the transaction records using the best data structures?
>
----
### Q. How to load balance in 60% ,40% weightage ?

----
### Q. explain Thread with caching?
>
----
